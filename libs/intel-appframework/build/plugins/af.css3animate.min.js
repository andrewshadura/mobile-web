!function(a){var b=[],c=function(b){return b.afCSS3AnimateId||(b.afCSS3AnimateId=a.uuid()),b.afCSS3AnimateId},d=function(b){return"string"==typeof b||b instanceof String?document.getElementById(b):a.is$(b)?b[0]:b},e=function(a,e){var f,g,h=d(a);return g=c(h),b[g]?(b[g].animate(e),f=b[g]):(f=i(h,e),b[g]=f),f};a.fn.css3Animate=function(a){!a.complete&&a.callback&&(a.complete=a.callback);var b=e(this[0],a);a.complete=null,a.sucess=null,a.failure=null;for(var c=1;c<this.length;c++)b.link(this[c],a);return b},a.css3AnimateQueue=function(){return new i.queue};var f=a.feat.cssTransformStart,g=a.feat.cssTransformEnd,h=a.feat.cssPrefix.replace(/-/g,"")+"TransitionEnd";
h=a.os.fennec||""===a.feat.cssPrefix||a.os.ie?"transitionend":h,h=h.replace(h.charAt(0),h.charAt(0).toLowerCase());var i=function(){var c=function(d,e){if(!(this instanceof c))return new c(d,e);if(this.callbacksStack=[],this.activeEvent=null,this.countStack=0,this.isActive=!1,this.el=d,this.linkFinishedProxy_=a.proxy(this.linkFinished,this),this.el){this.animate(e);var f=this;af(this.el).bind("destroy",function(){var a=f.el.afCSS3AnimateId;f.callbacksStack=[],b[a]&&delete b[a]})}};return c.prototype={animate:function(b){if(this.isActive&&this.cancel(),this.isActive=!0,!b)return alert("Please provide configuration options for animation of "+this.el.id),void 0;
var c,d,e=!!b.addClass,i=numOnly(b.time);if(e)b.removeClass?af(this.el).replaceClass(b.removeClass,b.addClass):af(this.el).addClass(b.addClass);else{if(0===i&&(b.time=0),b.y||(b.y=0),b.x||(b.x=0),b.previous){var j=new a.getCssMatrix(this.el);b.y+=numOnly(j.f),b.x+=numOnly(j.e)}b.origin||(b.origin="0% 0%"),b.scale||(b.scale="1"),b.rotateY||(b.rotateY="0"),b.rotateX||(b.rotateX="0"),b.skewY||(b.skewY="0"),b.skewX||(b.skewX="0"),b.timingFunction||(b.timingFunction="linear"),("number"==typeof b.x||-1==b.x.indexOf("%")&&-1==b.x.toLowerCase().indexOf("px")&&-1==b.x.toLowerCase().indexOf("deg"))&&(b.x=parseInt(b.x,10)+"px"),("number"==typeof b.y||-1==b.y.indexOf("%")&&-1==b.y.toLowerCase().indexOf("px")&&-1==b.y.toLowerCase().indexOf("deg"))&&(b.y=parseInt(b.y,10)+"px");
var k="translate"+f+b.x+","+b.y+g+" scale("+parseFloat(b.scale)+") rotate("+b.rotateX+")";a.os.opera||(k+=" rotateY("+b.rotateY+")"),k+=" skew("+b.skewX+","+b.skewY+")",this.el.style[a.feat.cssPrefix+"Transform"]=k,this.el.style[a.feat.cssPrefix+"BackfaceVisibility"]="hidden";var l=a.feat.cssPrefix+"Transform";void 0!==b.opacity&&(this.el.style.opacity=b.opacity,l+=", opacity"),b.width&&(this.el.style.width=b.width,l="all"),b.height&&(this.el.style.height=b.height,l="all"),this.el.style[a.feat.cssPrefix+"TransitionProperty"]="all",-1===(""+b.time).indexOf("s")?(c="ms",d=b.time+c):-1!==b.time.indexOf("ms")?(c="ms",d=b.time):(c="s",d=b.time+c),b.delay&&(this.el.style[a.feat.cssPrefix+"TransitionDelay"]=b.delay),this.el.style[a.feat.cssPrefix+"TransitionDuration"]=d,this.el.style[a.feat.cssPrefix+"TransitionTimingFunction"]=b.timingFunction,this.el.style[a.feat.cssPrefix+"TransformOrigin"]=b.origin
}this.callbacksStack.push({complete:b.complete,success:b.success,failure:b.failure}),this.countStack++;var m,n=this,o=window.getComputedStyle(this.el);e&&(m=o[a.feat.cssPrefix+"TransitionDuration"],i=numOnly(m),b.time=i,-1!==m.indexOf("ms")?c="ms":(c="s",b.time*=1e3)),0===i||"ms"==c&&5>i||"none"==o.display?a.asap(a.proxy(this.finishAnimation,this,[!1])):(this.activeEvent=function(a){clearTimeout(n.timeout),n.finishAnimation(a),n.el.removeEventListener(h,n.activeEvent,!1)},n.timeout=setTimeout(this.activeEvent,numOnly(b.time)+50),this.el.addEventListener(h,this.activeEvent,!1))},addCallbackHook:function(a){return a&&this.callbacksStack.push(a),this.countStack++,this.linkFinishedProxy_
},linkFinished:function(a){a?this.cancel():this.finishAnimation()},finishAnimation:function(a){a&&a.preventDefault&&a.preventDefault(),this.isActive&&(this.countStack--,0===this.countStack&&this.fireCallbacks(!1))},fireCallbacks:function(a){this.clearEvents();var b=this.callbacksStack;this.cleanup();for(var c=0;c<b.length;c++){var d=b[c].complete,e=b[c].success,f=b[c].failure;d&&"function"==typeof d&&d(a),a&&f&&"function"==typeof f?f():e&&"function"==typeof e&&e()}},cancel:function(){this.isActive&&this.fireCallbacks(!0)},cleanup:function(){this.callbacksStack=[],this.isActive=!1,this.countStack=0
},clearEvents:function(){this.activeEvent&&this.el.removeEventListener(h,this.activeEvent,!1),this.activeEvent=null},link:function(a,b){var c={complete:b.complete,success:b.success,failure:b.failure};return b.complete=this.addCallbackHook(c),b.success=null,b.failure=null,e(a,b),b.complete=c.complete,b.success=c.success,b.failure=c.failure,this}},c}();i.queue=function(){return{elements:[],push:function(a){this.elements.push(a)},pop:function(){return this.elements.pop()},run:function(){var a=this;if(0!==this.elements.length){if("function"==typeof this.elements[0]){var b=this.shift();b()}if(0!==this.elements.length){var c=this.shift();
this.elements.length>0&&(c.complete=function(b){b||a.run()}),i(document.getElementById(c.id),c)}}},shift:function(){return this.elements.shift()}}}}(af);