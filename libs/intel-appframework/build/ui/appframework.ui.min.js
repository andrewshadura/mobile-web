!function(a){"use strict";var b=window.location.pathname+window.location.search,c=window.location.hash,d=c,e=function(){function b(d){"afui"===d.target.id&&(c(),a(document).unbind("DOMNodeInserted",b))}function c(){d.useOSThemes&&(a.os.android?a("#afui").addClass("android"):a.os.ie?(a("#afui").addClass("win8"),a("head").append(a.create("script",{src:"plugins/af.8tiles.js"}))):a.os.blackberry||a.os.blackberry10||a.os.playbook?(a("#afui").addClass("bb"),d.backButtonText="Back",a("head").find("#bb10VisibilityHack").remove(),a("head").append("<style id='bb10VisibilityHack'>#afui .panel {-webkit-backface-visibility:visible  !important}</style>")):a.os.ios7?a("#afui").addClass("ios7"):a.os.ios&&a("#afui").addClass("ios"))
}var d=this;this.availableTransitions={},this.availableTransitions["default"]=this.availableTransitions.none=this.noTransition,a(document).ready(function(){var b=document.getElementById("afui");if(null===b){b=document.createElement("div"),b.id="afui";for(var d=document.body;d.firstChild;)b.appendChild(d.firstChild);a(document.body).prepend(b)}a.os.supportsTouch&&a.touchLayer(b),c()}),1===a("#afui").length?c():a(document).bind("DOMNodeInserted",b),"AppMobi"in window?document.addEventListener("appMobi.device.ready",function(){d.autoBoot()}):"complete"==document.readyState||"loaded"==document.readyState?d.init?d.autoBoot():a(window).one("afui:init",function(){d.autoBoot()
}):a(document).ready(function(){d.init?d.autoBoot():a(window).one("afui:init",function(){d.autoBoot()})},!1),"AppMobi"in window||(window.AppMobi={},window.AppMobi.webRoot=""),window.addEventListener("popstate",function(){var a=d.getPanelId(document.location.hash),b=document.location.href.replace(document.location.origin+"/","");"#"!=b&&(""===a&&1===d.history.length&&(a="#"+d.firstDiv.id),""!==a&&0!==af(a).filter(".panel").length&&a!="#"+d.activeDiv.id&&d.goBack())},!1)};e.prototype={init:!1,transitionTime:"230ms",showLoading:!0,loadingText:"Loading Content",loadContentQueue:[],isIntel:!1,titlebar:"",navbar:"",header:"",viewportContainer:"",remotePages:{},history:[],homeDiv:"",screenWidth:"",content:"",modalWindow:"",customFooter:!1,defaultFooter:"",defaultHeader:null,customMenu:!1,defaultMenu:"",_readyFunc:null,doingTransition:!1,passwordBox:a.passwordBox?new a.passwordBox:!1,selectBox:a.selectBox?a.selectBox:!1,ajaxUrl:"",transitionType:"slide",scrollingDivs:{},firstDiv:"",hasLaunched:!1,launchCompleted:!1,activeDiv:"",customClickHandler:"",menuAnimation:null,togglingSideMenu:!1,sideMenuWidth:"200px",trimBackButtonText:!0,useOSThemes:!0,lockPageBounce:!1,animateHeaders:!0,useAutoPressed:!0,horizontalScroll:!1,_currentHeaderID:"defaultHeader",autoBoot:function(){this.hasLaunched=!0,this.autoLaunch&&this.launch()
},css3animate:function(b,c){return b=a(b),b.css3Animate(c)},setSideMenuWidth:function(b){this.sideMenuWidth=b,b+="",b=b.replace("px","")+"px",a("head").find("#styleWidth").remove(),a("head").append("<style id='styleWidth'>#afui #menu {width:"+b+"  !important}</style>")},disableNativeScrolling:function(){a.feat.nativeTouchScroll=!1},manageHistory:!0,loadDefaultHash:!0,useAjaxCacheBuster:!1,actionsheet:function(b){return a.query("#afui").actionsheet(b)},popup:function(b){return a.query("#afui").popup(b)},blockUI:function(b){a.blockUI(b)},unblockUI:function(){a.unblockUI()},removeFooterMenu:function(){a.query("#navbar").hide(),a.query("#content").css("bottom","0px"),this.showNavMenu=!1
},showNavMenu:!0,autoLaunch:!0,showBackbutton:!0,backButtonText:"",resetScrollers:!0,ready:function(b){this.launchCompleted?b():a(document).on("afui:ready",function(){b()})},setBackButtonStyle:function(b){a.query("#backButton").replaceClass(null,b)},goBack:function(a){if(a=Math.min(Math.abs(~~a||1),this.history.length)){var b=this.history.splice(-a).shift();this.loadContent(b.target+"",0,1,b.transition),this.transitionType=b.transition,this.updateHash(b.target)}},clearHistory:function(){this.history=[],this.setBackButtonVisibility(!1)},pushHistory:function(c,d,e,f){this.history.push({target:c,transition:e});
try{if(!this.manageHistory)return;window.history.pushState(d,d,b+"#"+d+f),a(window).trigger("hashchange",null,{newUrl:b+"#"+d+f,oldURL:b+c})}catch(g){}},updateHash:function(c){if(this.manageHistory){c=-1==c.indexOf("#")?"#"+c:c,d=c;var e=window.location.hash,f=this.getPanelId(c).substring(1);try{window.history.replaceState(f,f,b+c),a(window).trigger("hashchange",null,{newUrl:b+c,oldUrl:b+e})}catch(g){}}},getPanelId:function(a){var b=a.indexOf("/");return-1==b?a:a.substring(0,b)},updateBadge:function(b,c,d,e){void 0===d&&(d="");var f=a(b),g=f.find("span.af-badge");0===g.length?("absolute"!=f.css("position")&&f.css("position","relative"),g=a.create("span",{className:"af-badge "+d,html:c}),f.append(g)):g.html(c),g.removeClass("tl bl br tr"),g.addClass(d),void 0===e&&(e="red"),a.isObject(e)?g.css(e):e&&g.css("background",e),g.data("ignore-pressed","true")
},removeBadge:function(b){a(b).find("span.af-badge").remove()},toggleNavMenu:function(b){this.showNavMenu&&("none"!=a.query("#navbar").css("display")&&(void 0!==b&&b!==!0||void 0===b)?(a.query("#content").css("bottom","0px"),a.query("#navbar").hide()):(void 0===b||void 0!==b&&b===!0)&&(a.query("#navbar").show(),a.query("#content").css("bottom",a.query("#navbar").css("height"))))},toggleHeaderMenu:function(b){"none"!=a.query("#header").css("display")&&(void 0!==b&&b!==!0||void 0===b)?(a.query("#content").css("top","0px"),a.query("#header").hide()):(void 0===b||void 0!==b&&b===!0)&&(a.query("#header").show(),a.query("#content").css("top",a.query("#header").css("height")))
},toggleSideMenu:function(b,c,d){if(this.isSideMenuEnabled()&&!this.togglingSideMenu){var e=this,f=a.query("#menu"),g=a.query("#content,  #header, #navbar");d=d||this.transitionTime;var h=this.isSideMenuOn();2===b||!h&&(void 0!==b&&b!==!1||void 0===b)?(this.togglingSideMenu=!0,f.show(),e.css3animate(g,{x:e.sideMenuWidth,time:d,complete:function(a){e.togglingSideMenu=!1,g.vendorCss("Transition",""),c&&c(a)}})):(void 0===b||void 0!==b&&b===!1)&&(this.togglingSideMenu=!0,e.css3animate(g,{x:"0px",time:d,complete:function(a){g.vendorCss("Transition",""),g.vendorCss("Transform",""),e.togglingSideMenu=!1,c&&c(a),f.hide()
}}))}},disableSideMenu:function(){var b=a.query("#content, #header, #navbar");this.isSideMenuOn()?this.toggleSideMenu(!1,function(a){a||b.removeClass("hasMenu")}):b.removeClass("hasMenu"),a.query("#menu").removeClass("tabletMenu")},enableSideMenu:function(){a.query("#content, #header, #navbar").addClass("hasMenu"),a.query("#menu").addClass("tabletMenu")},isSideMenuEnabled:function(){return a.query("#content").hasClass("hasMenu")},isSideMenuOn:function(){var b=parseInt(a.getCssMatrix(a("#content")).e)>1?!0:!1;return this.isSideMenuEnabled()&&b},prevFooter:null,updateNavbarElements:function(b){this.prevFooter&&(this.prevFooter.data("parent")?this.prevFooter.appendTo("#"+this.prevFooter.data("parent")):this.prevFooter.appendTo("#afui")),a.is$(b)||(b=a.query("#"+b)),a.query("#navbar").append(b),this.prevFooter=b;
var c=a.query("#navbar a");if(c.length>0){c.data("ignore-pressed","true").data("resetHistory","true");var d=parseFloat(100/c.length);c.css("width",d+"%")}var e=a.query("#navbar footer");if(0!==e.length){e=e.get(0).childNodes;for(var f=0;f<e.length;f++)3===e[f].nodeType&&e[f].parentNode.removeChild(e[f])}},prevHeader:null,updateHeaderElements:function(b,c){var d=this;if(a.is$(b)||(b=a.query("#"+b)),b!=this.prevHeader)if(this._currentHeaderID=b.prop("id"),this.prevHeader){if(a.query("#header").append(b),!a.ui.animateHeaders)return d.prevHeader.data("parent")?d.prevHeader.appendTo("#"+d.prevHeader.data("parent")):d.prevHeader.appendTo("#afui"),d.prevHeader=b,void 0;
var e=c?"100px":"-100px",f=c?"-100px":"100px";d.prevHeader.addClass("ignore"),d.css3animate(b,{x:f,opacity:.3,time:"1ms"}),d.css3animate(d.prevHeader,{x:e,y:0,opacity:.3,time:d.transitionTime,delay:numOnly(d.transitionTime)/5+"ms",complete:function(){d.prevHeader.data("parent")?d.prevHeader.appendTo("#"+d.prevHeader.data("parent")):d.prevHeader.appendTo("#afui"),d.prevHeader.removeClass("ignore"),d.css3animate(d.prevHeader,{x:f,opacity:1,time:"1ms"}),d.prevHeader=b}}),d.css3animate(b,{x:"0px",opacity:1,time:d.transitionTime})}else a.query("#header").append(b),this.prevHeader=b},updateSideMenu:function(a){return this.updateSideMenuElements(a)
},updateSideMenuElements:function(b){if(void 0!==b&&null!==b){var c=a.query("#menu_scroller");this.prevMenu&&(this.prevMenu.insertBefore("#afui #menu"),this.prevMenu=null),a.is$(b)||(b=a.query("#"+b)),c.html(""),c.append(b),this.prevMenu=b,this.scrollingDivs.menu_scroller.hideScrollbars(),this.scrollingDivs.menu_scroller.scrollToTop()}},setTitle:function(b){"defaultHeader"===this._currentHeaderID&&a.query("#header header:not(.ignore)  #pageTitle").html(b)},setBackButtonText:function(b){"defaultHeader"===this._currentHeaderID&&(this.trimBackButtonText&&(b=b.substring(0,5)+"..."),this.backButtonText.length>0?a.query("#header header:not(.ignore) #backButton").html(this.backButtonText):a.query("#header header:not(.ignore)  #backButton").html(b))
},setBackButtonVisibility:function(b){b?a.query("#header #backButton").css("visibility","visible"):a.query("#header #backButton").css("visibility","hidden")},showMask:function(b){b||(b=this.loadingText||""),a.query("#afui_mask>h1").html(b),a.query("#afui_mask").show()},hideMask:function(){a.query("#afui_mask").hide()},showModal:function(b,c){var d=this;this.modalTransition=c||"up";var e=a.query("#modalContainer");"string"==typeof b&&(b="#"+b.replace("#",""));var f=a.query(b);if(f.length){var g=this.scrollingDivs.hasOwnProperty(f.attr("id"));e.html(a.feat.nativeTouchScroll||!g?a.query(b).html():a.query(b).get(0).childNodes[0].innerHTML+"",!0),e.append("<a onclick='$.ui.hideModal();' class='closebutton modalbutton'></a>"),d.modalWindow.style.display="block",this.runTransition(this.modalTransition,d.modalTransContainer,d.modalWindow,!1),g?this.scrollingDivs.modal_container.enable(d.resetScrollers):this.scrollingDivs.modal_container.disable(),this.scrollToTop("modal"),e.data("panel",b)
}},hideModal:function(){var b=this;a.query("#modalContainer").html("",!0),this.runTransition(b.modalTransition,b.modalWindow,b.modalTransContainer,!0),this.scrollingDivs.modal_container.disable();var c=a.query(a.query("#modalContainer").data("panel")),d=c.data("unload");"string"==typeof d&&window[d]&&window[d](c.get(0)),c.trigger("unloadpanel")},updatePanel:function(b,c){b="#"+b.replace("#","");var d=a.query(b).get(0);if(d){var e=a.create("div",{html:c});e=e.children(".panel")&&e.children(".panel").length>0?e.children(".panel").get(0):e.get(0),!d.getAttribute("js-scrolling")||"yes"!=d.getAttribute("js-scrolling").toLowerCase()&&"true"!=d.getAttribute("js-scrolling").toLowerCase()?(a.cleanUpContent(d,!1,!0),a(d).html(c)):(a.cleanUpContent(d.childNodes[0],!1,!0),a(d.childNodes[0]).html(c)),e.getAttribute("data-title")&&d.setAttribute("data-title",e.getAttribute("data-title"))
}},updateContentDiv:function(a,b){return this.updatePanel(a,b)},addContentDiv:function(b,c,d,e,f){b="string"!=typeof b?b:-1==b.indexOf("#")?"#"+b:b;var g,h,i=a.query(b).get(0);return i?g=i:(g=a.create("div",{html:c}),g=g.children(".panel")&&g.children(".panel").length>0?g.children(".panel").get(0):g.get(0),!g.getAttribute("data-title")&&d&&g.setAttribute("data-title",d),h=g.id?g.id:b.replace("#",""),g.id=h,g.id!=b&&g.setAttribute("data-crc",b.replace("#",""))),g.className="panel",h=g.id,this.addDivAndScroll(g,e,f),i=null,g=null,h},addDivAndScroll:function(b,c,d,e){var f,g=this,h=!1,i=b.style.overflow,j="hidden"!=i&&"visible"!=i;
e=e||this.content,!a.feat.nativeTouchScroll&&j&&b.setAttribute("js-scrolling","true"),!b.getAttribute("js-scrolling")||"yes"!=b.getAttribute("js-scrolling").toLowerCase()&&"true"!=b.getAttribute("js-scrolling").toLowerCase()||(h=!0,j=!0);var k=b.title;if(b.title="",b.setAttribute("data-title",k),b.getAttribute("scrolling")&&"no"==b.getAttribute("scrolling")&&(j=!1,h=!1,b.removeAttribute("js-scrolling")),h){f=b.cloneNode(!1),b.title=null,b.id=null;var l=a(b);l.removeAttr("data-footer data-aside data-nav data-header selected data-load data-unload data-tab data-crc title data-title"),l.replaceClass("panel","afScrollPanel"),f.appendChild(b),e.appendChild(f),this.selectBox!==!1&&this.selectBox.getOldSelects(f.id),this.passwordBox!==!1&&this.passwordBox.getOldPasswords(f.id)
}else e.appendChild(b),f=b,b.style["-webkit-overflow-scrolling"]="none";j&&(this.scrollingDivs[f.id]=a(b).scroller({scrollBars:!0,verticalScroll:!0,horizontalScroll:g.horizontalScroll,vScrollCSS:"afScrollbar",refresh:c,useJsScroll:h,noParent:!h,lockBounce:this.lockPageBounce,autoEnable:!1}),d&&a.bind(this.scrollingDivs[f.id],"refresh-release",function(a){a&&d()})),b=null,f=null},scrollToTop:function(a,b){b=b||"300ms",a=a.replace("#",""),this.scrollingDivs[a]&&this.scrollingDivs[a].scrollToTop(b)},scrollToBottom:function(a,b){a=a.replace("#",""),this.scrollingDivs[a]&&this.scrollingDivs[a].scrollToBottom(b)
},parsePanelFunctions:function(b,c,d){var e=this,f=b.getAttribute("data-footer"),g=b.getAttribute("data-header");f&&"none"==f.toLowerCase()?(e.toggleNavMenu(!1),f=!1):e.toggleNavMenu(!0),f&&e.customFooter!=f?(e.customFooter=f,e.updateNavbarElements(f)):f!=e.customFooter&&(e.customFooter&&e.updateNavbarElements(e.defaultFooter),e.customFooter=!1),g&&"none"==g.toLowerCase()?(e.toggleHeaderMenu(!1),g=!1):e.toggleHeaderMenu(!0),g&&e.customHeader!=g?(e.customHeader=g,e.updateHeaderElements(g,d)):g!=e.customHeader&&(e.customHeader&&e.updateHeaderElements(e.defaultHeader,d),e.customHeader=!1);var h=a(b).find("footer");
h.length>0&&(e.customFooter=b.id,h.data("parent",b.id),e.updateNavbarElements(h));var i=a(b).find("header");i.length>0&&(e.customHeader=b.id,i.data("parent",b.id),e.updateHeaderElements(i,d)),b.getAttribute("data-tab")&&(a.query("#navbar a").removeClass("pressed"),a.query("#navbar #"+b.getAttribute("data-tab")).addClass("pressed"));var j=b.getAttribute("data-nav");j&&this.customMenu!=j?(this.customMenu=j,this.updateSideMenuElements(j)):j!=this.customMenu&&(this.customMenu&&this.updateSideMenuElements(this.defaultMenu),this.customMenu=!1),c&&(k=c.getAttribute("data-unload"),"string"==typeof k&&window[k]&&window[k](c),a(c).trigger("unloadpanel"));
var k=b.getAttribute("data-load");if("string"==typeof k&&window[k]&&window[k](b),a(b).trigger("loadpanel"),this.isSideMenuOn()){var e=this;e.toggleSideMenu(!1)}},parseScriptTags:function(b){b&&a.parseJS(b)},loadContent:function(b,c,d,e,f){if(this.doingTransition)return this.loadContentQueue.push([b,c,d,e,f]),void 0;if(0!==b.length){var g=!0;if(f=f||document.createElement("a"),-1==b.indexOf("#")){var i="url"+h(b),j=a.query("div.panel[data-crc='"+i+"']");a.query("#"+b).length>0?g=!1:j.length>0?(g=!1,"true"===f.getAttribute("data-refresh-ajax")||f.refresh&&f.refresh===!0||this.isAjaxApp?g=!0:b="#"+j.get(0).id):a.query("#"+i).length>0&&(g=!1,"true"===f.getAttribute("data-refresh-ajax")||f.refresh&&f.refresh===!0||this.isAjaxApp?g=!0:b="#"+i)
}-1==b.indexOf("#")&&g?this.loadAjax(b,c,d,e,f):this.loadDiv(b,c,d,e)}},loadDiv:function(b,c,e,f){var g=this,h=b.replace("#",""),i=h.indexOf("/"),j="";if(-1!=i&&(j=h.substr(i),h=h.substr(0,i)),h=a.query("#"+h).get(0),!h)return a(document).trigger("missingpanel",null,{missingTarget:b}),void 0;if(h==this.activeDiv&&!e)return this.isSideMenuOn()&&this.toggleSideMenu(!1),void 0;this.transitionType=f;var k=this.activeDiv,l=h;if("true"==h.getAttribute("data-modal")||"true"==h.getAttribute("modal")){var m=h.getAttribute("data-load");return"string"==typeof m&&window[m]&&window[m](h),a(h).trigger("loadpanel"),this.showModal(h.id)
}k!=l&&(c?(this.clearHistory(),this.pushHistory("#"+this.firstDiv.id,h.id,f,j)):e||this.pushHistory(d,h.id,f,j),d="#"+h.id+j,this.doingTransition=!0,k.style.display="block",l.style.display="block",this.runTransition(f,k,l,e),this.parsePanelFunctions(h,k,e),this.loadContentData(h,c,e,f),setTimeout(function(){g.scrollingDivs[k.id]&&g.scrollingDivs[k.id].disable()},numOnly(g.transitionTime)+50))},loadContentData:function(b,c,d){var e,f,g,h;d?this.history.length>0&&(g=this.history[this.history.length-1],h=g.target.indexOf("/"),e=-1!=h?g.target.substr(0,h):g.target,f=a.query(e).get(0),f?this.setBackButtonText(f.getAttribute("data-title")):this.setBackButtonText("Back")):this.activeDiv.getAttribute("data-title")?this.setBackButtonText(this.activeDiv.getAttribute("data-title")):this.setBackButtonText("Back"),b.getAttribute("data-title")&&this.setTitle(b.getAttribute("data-title")),c&&(this.setBackButtonText(this.firstDiv.getAttribute("data-title")),b==this.firstDiv&&(this.history.length=0)),a("#header #menubadge").css("float","right"),0===this.history.length?(this.setBackButtonVisibility(!1),this.history=[],a("#header #menubadge").css("float","left")):this.showBackbutton&&this.setBackButtonVisibility(!0),this.activeDiv=b,this.scrollingDivs[this.activeDiv.id]&&this.scrollingDivs[this.activeDiv.id].enable(this.resetScrollers)
},loadAjax:function(b,c,d,e,f){if("afui_ajax"!=this.activeDiv.id||b!=this.ajaxUrl){var g="url"+h(b),i=this;-1==b.indexOf("http")&&(b=AppMobi.webRoot+b);var j=new XMLHttpRequest;f&&"object"!=typeof f&&(f=document.createElement("a"),f.setAttribute("data-persist-ajax",!0)),f=f||document.createElement("a"),j.onreadystatechange=function(){if(4==j.readyState&&200==j.status){this.doingTransition=!1;var h,k=!1,l=a.query("#"+g);if(l.length>0)i.updatePanel(g,j.responseText),l.get(0).setAttribute("data-title",f.title?f.title:b);else if(f.getAttribute("data-persist-ajax")||i.isAjaxApp){var m="true"===f.getAttribute("data-pull-scroller")?!0:!1;
h=m?function(){f.refresh=!0,i.loadContent(b,c,d,e,f),f.refresh=!1}:null;var n=a(j.responseText);n.hasClass("panel")?(g=n.attr("id"),n=n.get(0).innerHTML):n=n.html(),a("#"+g).length>0?i.updatePanel("#"+g,n):a("div.panel[data-crc='"+g+"']").length>0?(i.updatePanel(a("div.panel[data-crc='"+g+"']").get(0).id,n),g=a("div.panel[data-crc='"+g+"']").get(0).id):g=i.addContentDiv(g,j.responseText,f.title?f.title:b,m,h)}else i.updatePanel("afui_ajax",j.responseText),a.query("#afui_ajax").get(0).setAttribute("data-title",f.title?f.title:b),i.loadContent("#afui_ajax",c,d),k=!0;var o=document.createElement("div");
return a(o).html(j.responseText),i.parseScriptTags(o),k?(i.showLoading&&i.hideMask(),void 0):(i.loadContent("#"+g),i.showLoading&&i.hideMask(),null)}},this.ajaxUrl=b;var k=this.useAjaxCacheBuster?b+(b.split("?")[1]?"&":"?")+"cache="+1e16*Math.random():b;j.open("GET",k,!0),j.setRequestHeader("X-Requested-With","XMLHttpRequest"),j.send(),this.showLoading&&this.showMask()}},runTransition:function(a,b,c,d){this.availableTransitions[a]||(a="default"),this.availableTransitions[a].call(this,b,c,d)},launch:function(){if(this.hasLaunched===!1||this.launchCompleted)return this.hasLaunched=!0,void 0;var b=this;
this.isIntel=window.AppMobi&&"object"==typeof AppMobi&&void 0!==AppMobi.app?!0:!1,this.viewportContainer=af.query("#afui"),this.navbar=af.query("#navbar").get(0),this.content=af.query("#content").get(0),this.header=af.query("#header").get(0),this.menu=af.query("#menu").get(0),this.viewportContainer.on("click","a",function(a){f(a,a.currentTarget)});var e=null;a.bind(a.touchLayer,"enter-edit",function(a){e=a}),a.bind(a.touchLayer,"enter-edit-reshape",function(){var c=a(e),d=c.closest(b.activeDiv);if(d&&d.size()>0)if(a.os.ios||a.os.chrome){var f,g;f=document.body.scrollTop?document.body.scrollTop-d.offset().top:0,g=d.offset().bottom-c.offset().bottom,b.scrollingDivs[b.activeDiv.id].setPaddings(f,g)
}else if(a.os.android||a.os.blackberry){var h=c.offset(),i=d.offset();h.bottom>i.bottom&&h.height<i.height&&b.scrollingDivs[b.activeDiv.id].scrollToItem(c,"bottom")}}),a.os.ios&&a.bind(a.touchLayer,"exit-edit-reshape",function(){b.activeDiv&&b.activeDiv.id&&b.scrollingDivs.hasOwnProperty(b.activeDiv.id)&&b.scrollingDivs[b.activeDiv.id].setPaddings(0,0)}),this.navbar||(this.navbar=a.create("div",{id:"navbar"}).get(0),this.viewportContainer.append(this.navbar)),this.header||(this.header=a.create("div",{id:"header"}).get(0),this.viewportContainer.prepend(this.header)),this.menu||(this.menu=a.create("div",{id:"menu",html:'<div id="menu_scroller"></div>'}).get(0),this.viewportContainer.append(this.menu),this.menu.style.overflow="hidden",this.scrollingDivs.menu_scroller=a.query("#menu_scroller").scroller({scrollBars:!0,verticalScroll:!0,vScrollCSS:"afScrollbar",useJsScroll:!a.feat.nativeTouchScroll,noParent:a.feat.nativeTouchScroll,autoEnable:!0,lockBounce:this.lockPageBounce}),a.feat.nativeTouchScroll&&a.query("#menu_scroller").css("height","100%"),this.asideMenu=a.create("div",{id:"aside_menu",html:'<div id="aside_menu_scroller"></div>'}).get(0),this.viewportContainer.append(this.asideMenu),this.asideMenu.style.overflow="hidden",this.scrollingDivs.menu_scroller=a.query("#aside_menu_scroller").scroller({scrollBars:!0,verticalScroll:!0,vScrollCSS:"afScrollbar",useJsScroll:!a.feat.nativeTouchScroll,noParent:a.feat.nativeTouchScroll,autoEnable:!0,lockBounce:this.lockPageBounce}),a.feat.nativeTouchScroll&&a.query("#aside_menu_scroller").css("height","100%")),this.content||(this.content=a.create("div",{id:"content"}).get(0),this.viewportContainer.append(this.content)),a(this.header).html('<a id="backButton" class="button"></a> <h1 id="pageTitle"></h1>'+header.innerHTML),this.backButton=a.query("#header #backButton").css("visibility","hidden"),a(document).on("click","#header #backButton",function(a){a.preventDefault(),b.goBack()
}),this.titleBar=a.query("#header #pageTitle").get(0),this.addContentDiv("afui_ajax","");var g=a.create("div",{id:"afui_mask",className:"ui-loader",html:"<span class='ui-icon ui-icon-loading spin'></span><h1>Loading Content</h1>"}).css({"z-index":2e4,display:"none"});document.body.appendChild(g.get(0));var h=a.create("div",{id:"afui_modal"}).get(0);h.appendChild(a.create("div",{id:"modalContainer"}).get(0)),this.modalTransContainer=a.create("div",{id:"modalTransContainer"}).appendTo(h).get(0),this.viewportContainer.append(h),this.scrollingDivs.modal_container=a.query("#modalContainer").scroller({scrollBars:!0,vertical:!0,vScrollCSS:"afScrollbar",noParent:!0,lockBounce:this.lockPageBounce}),this.modalWindow=h;
for(var i={},j=this.viewportContainer.get(0).querySelectorAll(".panel"),k=0;k<j.length;k++){var l,m=j[k],n=m,o=m.previousSibling;m.parentNode&&"content"!=m.parentNode.id?(m.parentNode.removeChild(m),l=m.id,n.getAttribute("selected")&&(this.firstDiv=a.query("#"+l).get(0)),this.addDivAndScroll(n),a.query("#"+l).insertAfter(o)):m.parsedContent||(m.parsedContent=1,m.parentNode.removeChild(m),l=m.id,n.getAttribute("selected")&&(this.firstDiv=a.query("#"+l).get(0)),this.addDivAndScroll(n),a.query("#"+l).insertAfter(o)),m.getAttribute("data-defer")&&(i[l]=m.getAttribute("data-defer")),this.firstDiv||(this.firstDiv=a.query("#"+l).get(0)),m=null
}j=null;var p=!1,q=Object.keys(i).length;if(q>0){p=!0;var r=0;for(var s in i)!function(c){a.ajax({url:AppMobi.webRoot+i[c],success:function(d){0!==d.length&&(b.updatePanel(c,d),b.parseScriptTags(a.query("#"+c).get(0)),r++,r>=q&&(a(document).trigger("defer:loaded"),p=!1))},error:function(){console.log("Error with deferred load "+AppMobi.webRoot+i[c]),r++,r>=q&&(a(document).trigger("defer:loaded"),p=!1)}})}(s)}if(this.firstDiv){this.activeDiv=this.firstDiv,this.scrollingDivs[this.activeDiv.id]&&this.scrollingDivs[this.activeDiv.id].enable();var t=function(){a.query("#navbar").append(a.create("footer",{id:"defaultNav"}).append(a.query("#navbar").children())),b.defaultFooter="defaultNav",b.prevFooter=a.query("#defaultNav"),b.updateNavbarElements(b.prevFooter);
var e=a.query("nav").get(0);e&&(b.defaultMenu=a(e),b.updateSideMenuElements(b.defaultMenu),b.prevMenu=b.defaultMenu),b.defaultHeader="defaultHeader",a.query("#header").append(a.create("header",{id:"defaultHeader"}).append(a.query("#header").children())),b.prevHeader=a.query("#defaultHeader"),a.query("#navbar").on("click","a",function(b){a.query("#navbar a").not(b.currentTarget).removeClass("pressed"),a(b.currentTarget).addClass("pressed")});var f=a.query("#navbar a");f.length>0&&f.css("width",100/f.length+"%"),a.query("nav").length>0&&(a.query("#afui #header").addClass("hasMenu"),a.query("#afui #content").addClass("hasMenu"),a.query("#afui #navbar").addClass("hasMenu"),a.query("#afui #menu").addClass("tabletMenu"));
var g=b.getPanelId(c),h=!(g!="#"+b.firstDiv.id);g.length>0&&b.loadDefaultHash&&!h?b.loadContent(c,!0,!1,"none"):(d="#"+b.firstDiv.id,b.firstDiv.style.display="block",b.parsePanelFunctions(b.firstDiv),b.loadContentData(b.firstDiv),a.query("#header #backButton").css("visibility","hidden"),("true"==b.firstDiv.getAttribute("data-modal")||"true"==b.firstDiv.getAttribute("modal"))&&b.showModal(b.firstDiv.id)),b.launchCompleted=!0,a(document).trigger("afui:ready"),a.query("#afui #splashscreen").remove()};p?a(document).one("defer:loaded",t):t()}a.bind(b,"content-loaded",function(){if(b.loadContentQueue.length>0){var a=b.loadContentQueue.splice(0,1)[0];
b.loadContent(a[0],a[1],a[2],a[3],a[4])}}),(window.navigator.standalone||this.isIntel)&&this.blockPageScroll(),this.topClickScroll()},topClickScroll:function(){var a=this;document.getElementById("header").addEventListener("click",function(b){b.clientY<=15&&"h1"==b.target.nodeName.toLowerCase()&&a.scrollingDivs[a.activeDiv.id].scrollToTop("100")})},blockPageScroll:function(){a.query("#afui #header").bind("touchmove",function(a){a.preventDefault()})},noTransition:function(a,b){b.style.display="block",a.style.display="block";var c=this;c.clearAnimations(b),c.css3animate(a,{x:"0%",y:0}),c.finishTransition(a),b.style.zIndex=2,a.style.zIndex=1
},finishTransition:function(b,c){b.style.display="none",this.doingTransition=!1,c&&this.clearAnimations(c),b&&this.clearAnimations(b),a.trigger(this,"content-loaded")},clearAnimations:function(b){b.style[a.feat.cssPrefix+"Transform"]="none",b.style[a.feat.cssPrefix+"Transition"]="none"}};var f=function(b,c){if(c!=afui){if("a"!=c.tagName.toLowerCase()&&c.parentNode)return f(b,c.parentNode);if("undefined"!==c.tagName&&"a"==c.tagName.toLowerCase()){var d="function"==typeof a.ui.customClickHandler?a.ui.customClickHandler:!1;if(d!==!1&&a.ui.customClickHandler(c,b))return b.preventDefault();if(-1!==c.href.toLowerCase().indexOf("javascript:")||c.getAttribute("data-ignore"))return;
if(0===c.href.indexOf("tel:"))return!1;if(-1===c.hash.indexOf("#")&&c.target.length>0)return 0!==c.href.toLowerCase().indexOf("javascript:")&&(a.ui.isIntel?(b.preventDefault(),AppMobi.device.launchExternal(c.href)):a.os.desktop||(b.target.target="_blank")),void 0;var e=c.href,g=location.protocol+"//"+location.hostname+":"+location.port+location.pathname;if(0===e.indexOf(g)&&(e=e.substring(g.length)),"#"==e||e.indexOf("#")===e.length-1||0===e.length&&0===c.hash.length)return;b.preventDefault();var h=c.getAttribute("data-transition"),i=c.getAttribute("data-resetHistory");return i=i&&"true"==i.toLowerCase()?!0:!1,e=c.hash.length>0?c.hash:e,a.ui.loadContent(e,i,0,h,c),void 0
}}},g="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D",h=function(a,b){void 0===b&&(b=0);
var c=0,d=0;b=-1^b;for(var e=0,f=a.length;f>e;e++)c=255&(b^a.charCodeAt(e)),d="0x"+g.substr(9*c,8),b=b>>>8^d;return-1^b};a.ui=new e,a.ui.init=!0,a(window).trigger("afui:preinit"),a(window).trigger("afui:init")}(af),function(){$(document).one("appMobi.device.ready",function(){setTimeout(function(){document.getElementById("afui").style.height="100%",document.body.style.height="100%",document.documentElement.style.minHeight=window.innerHeight},300),$.ui.ready(function(){$.ui.blockPageScroll()})}),$.feat.nativeTouchScroll&&document.addEventListener("orientationchange",function(){if($.ui.scrollingDivs[$.ui.activeDiv.id]){var a=$.ui.scrollingDivs[$.ui.activeDiv.id];
0===a.el.scrollTop&&(a.disable(),setTimeout(function(){a.enable()},300))}})}(),function(a){function b(b,c,d){b.style.display="block",c.style.display="block";var e=this;d?(c.style.zIndex=1,b.style.zIndex=2,e.clearAnimations(c),e.css3animate(b,{x:"0%",time:a.transitionTime,opacity:.1,complete:function(a){return a?(e.finishTransition(b,c),void 0):(e.css3animate(b,{x:"-100%",opacity:1,complete:function(){e.finishTransition(b)}}),c.style.zIndex=2,b.style.zIndex=1,void 0)}})):(b.style.zIndex=1,c.style.zIndex=2,c.style.opacity=0,e.css3animate(c,{x:"0%",opacity:.1,complete:function(){e.css3animate(c,{x:"0%",time:a.transitionTime,opacity:1,complete:function(a){return a?(e.finishTransition(b,c),void 0):(e.clearAnimations(c),e.css3animate(b,{x:"-100%",y:0,complete:function(){e.finishTransition(b)
}}),void 0)}})}}))}a.availableTransitions.fade=b}(af.ui),function(a){function b(b,c,d){b.style.display="block",c.style.display="block";var e=this;d?(e.css3animate(c,{x:"100%",scale:.8,rotateY:"180deg",complete:function(){e.css3animate(c,{x:"0%",scale:1,time:a.transitionTime,rotateY:"0deg",complete:function(){e.clearAnimations(c)}})}}),e.css3animate(b,{x:"100%",time:a.transitionTime,scale:.8,rotateY:"180deg",complete:function(){e.css3animate(b,{x:"-100%",opacity:1,scale:1,rotateY:"0deg",complete:function(){e.finishTransition(b)}}),c.style.zIndex=2,b.style.zIndex=1}})):(b.style.zIndex=1,c.style.zIndex=2,e.css3animate(c,{x:"100%",scale:.8,rotateY:"180deg",complete:function(){e.css3animate(c,{x:"0%",scale:1,time:a.transitionTime,rotateY:"0deg",complete:function(){e.clearAnimations(c)
}})}}),e.css3animate(b,{x:"100%",time:a.transitionTime,scale:.8,rotateY:"180deg",complete:function(){e.css3animate(b,{x:"-100%",opacity:1,scale:1,rotateY:"0deg",complete:function(){e.finishTransition(b)}}),c.style.zIndex=2,b.style.zIndex=1}}))}a.availableTransitions.flip=b}(af.ui),function(a){function b(b,c,d){b.style.display="block",c.style.display="block";var e=this;d?(c.style.zIndex=1,b.style.zIndex=2,e.clearAnimations(c),e.css3animate(b,{x:"0%",time:a.transitionTime,opacity:.1,scale:.2,origin:"50% 50%",complete:function(a){return a?(e.finishTransition(b),void 0):(e.css3animate(b,{x:"-100%",complete:function(){e.finishTransition(b)
}}),c.style.zIndex=2,b.style.zIndex=1,void 0)}})):(b.style.zIndex=1,c.style.zIndex=2,e.css3animate(c,{x:"0%",scale:.2,origin:"50% 50%",opacity:.1,time:"0ms",complete:function(){e.css3animate(c,{x:"0%",time:a.transitionTime,scale:1,opacity:1,origin:"0% 0%",complete:function(a){return a?(e.finishTransition(b,c),void 0):(e.clearAnimations(c),e.css3animate(b,{x:"100%",y:0,complete:function(){e.finishTransition(b)}}),void 0)}})}}))}a.availableTransitions.pop=b}(af.ui),function(a){function b(b,c,d){b.style.display="block",c.style.display="block";var e=this;d?e.css3animate(b,{x:"0%",y:"0%",complete:function(){e.css3animate(b,{x:"100%",time:a.transitionTime,complete:function(){e.finishTransition(b,c)
}}).link(c,{x:"0%",time:a.transitionTime})}}).link(c,{x:"-100%",y:"0%"}):e.css3animate(b,{x:"0%",y:"0%",complete:function(){e.css3animate(b,{x:"-100%",time:a.transitionTime,complete:function(){e.finishTransition(b,c)}}).link(c,{x:"0%",time:a.transitionTime})}}).link(c,{x:"100%",y:"0%"})}a.availableTransitions.slide=b,a.availableTransitions["default"]=b}(af.ui),function(a){function b(b,c,d){b.style.display="block",c.style.display="block";var e=this;d?(b.style.zIndex=2,c.style.zIndex=1,e.css3animate(b,{y:"0%",x:"0%",complete:function(){e.css3animate(b,{y:"-100%",time:a.transitionTime,complete:function(){e.finishTransition(b,c)
}})}})):(b.style.zIndex=1,c.style.zIndex=2,e.css3animate(c,{y:"-100%",x:"0%",time:"10ms",complete:function(){e.css3animate(c,{y:"0%",time:a.transitionTime,complete:function(){e.finishTransition(b,c)}})}}))}a.availableTransitions.down=b}(af.ui),function(a){function b(b,c,d){b.style.display="block",c.style.display="block";var e=this;d?(b.style.zIndex=2,c.style.zIndex=1,e.css3animate(b,{y:"0%",x:"0%",complete:function(){e.css3animate(b,{y:"100%",time:a.transitionTime,complete:function(){e.finishTransition(b,c)}})}})):(b.style.zIndex=1,c.style.zIndex=2,e.css3animate(c,{y:"100%",x:"0%",time:"10ms",complete:function(){e.css3animate(c,{y:"0%",time:a.transitionTime,complete:function(){e.finishTransition(b,c)
}})}}))}a.availableTransitions.up=b}(af.ui),function(a){var b=[],c=function(b){return b.afCSS3AnimateId||(b.afCSS3AnimateId=a.uuid()),b.afCSS3AnimateId},d=function(b){return"string"==typeof b||b instanceof String?document.getElementById(b):a.is$(b)?b[0]:b},e=function(a,e){var f,g,h=d(a);return g=c(h),b[g]?(b[g].animate(e),f=b[g]):(f=i(h,e),b[g]=f),f};a.fn.css3Animate=function(a){!a.complete&&a.callback&&(a.complete=a.callback);var b=e(this[0],a);a.complete=null,a.sucess=null,a.failure=null;for(var c=1;c<this.length;c++)b.link(this[c],a);return b},a.css3AnimateQueue=function(){return new i.queue
};var f=a.feat.cssTransformStart,g=a.feat.cssTransformEnd,h=a.feat.cssPrefix.replace(/-/g,"")+"TransitionEnd";h=a.os.fennec||""===a.feat.cssPrefix||a.os.ie?"transitionend":h,h=h.replace(h.charAt(0),h.charAt(0).toLowerCase());var i=function(){var c=function(d,e){if(!(this instanceof c))return new c(d,e);if(this.callbacksStack=[],this.activeEvent=null,this.countStack=0,this.isActive=!1,this.el=d,this.linkFinishedProxy_=a.proxy(this.linkFinished,this),this.el){this.animate(e);var f=this;af(this.el).bind("destroy",function(){var a=f.el.afCSS3AnimateId;f.callbacksStack=[],b[a]&&delete b[a]})}};return c.prototype={animate:function(b){if(this.isActive&&this.cancel(),this.isActive=!0,!b)return alert("Please provide configuration options for animation of "+this.el.id),void 0;
var c,d,e=!!b.addClass,i=numOnly(b.time);if(e)b.removeClass?af(this.el).replaceClass(b.removeClass,b.addClass):af(this.el).addClass(b.addClass);else{if(0===i&&(b.time=0),b.y||(b.y=0),b.x||(b.x=0),b.previous){var j=new a.getCssMatrix(this.el);b.y+=numOnly(j.f),b.x+=numOnly(j.e)}b.origin||(b.origin="0% 0%"),b.scale||(b.scale="1"),b.rotateY||(b.rotateY="0"),b.rotateX||(b.rotateX="0"),b.skewY||(b.skewY="0"),b.skewX||(b.skewX="0"),b.timingFunction||(b.timingFunction="linear"),("number"==typeof b.x||-1==b.x.indexOf("%")&&-1==b.x.toLowerCase().indexOf("px")&&-1==b.x.toLowerCase().indexOf("deg"))&&(b.x=parseInt(b.x,10)+"px"),("number"==typeof b.y||-1==b.y.indexOf("%")&&-1==b.y.toLowerCase().indexOf("px")&&-1==b.y.toLowerCase().indexOf("deg"))&&(b.y=parseInt(b.y,10)+"px");
var k="translate"+f+b.x+","+b.y+g+" scale("+parseFloat(b.scale)+") rotate("+b.rotateX+")";a.os.opera||(k+=" rotateY("+b.rotateY+")"),k+=" skew("+b.skewX+","+b.skewY+")",this.el.style[a.feat.cssPrefix+"Transform"]=k,this.el.style[a.feat.cssPrefix+"BackfaceVisibility"]="hidden";var l=a.feat.cssPrefix+"Transform";void 0!==b.opacity&&(this.el.style.opacity=b.opacity,l+=", opacity"),b.width&&(this.el.style.width=b.width,l="all"),b.height&&(this.el.style.height=b.height,l="all"),this.el.style[a.feat.cssPrefix+"TransitionProperty"]="all",-1===(""+b.time).indexOf("s")?(c="ms",d=b.time+c):-1!==b.time.indexOf("ms")?(c="ms",d=b.time):(c="s",d=b.time+c),b.delay&&(this.el.style[a.feat.cssPrefix+"TransitionDelay"]=b.delay),this.el.style[a.feat.cssPrefix+"TransitionDuration"]=d,this.el.style[a.feat.cssPrefix+"TransitionTimingFunction"]=b.timingFunction,this.el.style[a.feat.cssPrefix+"TransformOrigin"]=b.origin
}this.callbacksStack.push({complete:b.complete,success:b.success,failure:b.failure}),this.countStack++;var m,n=this,o=window.getComputedStyle(this.el);e&&(m=o[a.feat.cssPrefix+"TransitionDuration"],i=numOnly(m),b.time=i,-1!==m.indexOf("ms")?c="ms":(c="s",b.time*=1e3)),0===i||"ms"==c&&5>i||"none"==o.display?a.asap(a.proxy(this.finishAnimation,this,[!1])):(this.activeEvent=function(a){clearTimeout(n.timeout),n.finishAnimation(a),n.el.removeEventListener(h,n.activeEvent,!1)},n.timeout=setTimeout(this.activeEvent,numOnly(b.time)+50),this.el.addEventListener(h,this.activeEvent,!1))},addCallbackHook:function(a){return a&&this.callbacksStack.push(a),this.countStack++,this.linkFinishedProxy_
},linkFinished:function(a){a?this.cancel():this.finishAnimation()},finishAnimation:function(a){a&&a.preventDefault&&a.preventDefault(),this.isActive&&(this.countStack--,0===this.countStack&&this.fireCallbacks(!1))},fireCallbacks:function(a){this.clearEvents();var b=this.callbacksStack;this.cleanup();for(var c=0;c<b.length;c++){var d=b[c].complete,e=b[c].success,f=b[c].failure;d&&"function"==typeof d&&d(a),a&&f&&"function"==typeof f?f():e&&"function"==typeof e&&e()}},cancel:function(){this.isActive&&this.fireCallbacks(!0)},cleanup:function(){this.callbacksStack=[],this.isActive=!1,this.countStack=0
},clearEvents:function(){this.activeEvent&&this.el.removeEventListener(h,this.activeEvent,!1),this.activeEvent=null},link:function(a,b){var c={complete:b.complete,success:b.success,failure:b.failure};return b.complete=this.addCallbackHook(c),b.success=null,b.failure=null,e(a,b),b.complete=c.complete,b.success=c.success,b.failure=c.failure,this}},c}();i.queue=function(){return{elements:[],push:function(a){this.elements.push(a)},pop:function(){return this.elements.pop()},run:function(){var a=this;if(0!==this.elements.length){if("function"==typeof this.elements[0]){var b=this.shift();b()}if(0!==this.elements.length){var c=this.shift();
this.elements.length>0&&(c.complete=function(b){b||a.run()}),i(document.getElementById(c.id),c)}}},shift:function(){return this.elements.shift()}}}}(af),function(a){function b(a){return e[a].el?!0:(delete e[a],!1)}function c(){if(af.os.android&&!af.os.chrome&&af.os.webkit){var c=!1;a.bind(a.touchLayer,["cancel-enter-edit","exit-edit"],function(){if(c){c=!1;for(var a in e)b(a)&&e[a].androidFormsMode&&e[a].stopFormsMode()}})}g=!0}var d=75,e=[],f=function(b){return b.afScrollerId||(b.afScrollerId=a.uuid()),b.afScrollerId};a.fn.scroller=function(b){for(var c,d,g=0;g<this.length;g++)d=f(this[g]),e[d]?c=e[d]:(b||(b={}),a.feat.nativeTouchScroll||(b.useJsScroll=!0),c=h(this[g],b),e[d]=c);
return 1==this.length?c:this};var g=!1,h=function(){function b(b,c){var d=document.createElement("div");return d.style.position="absolute",d.style.width=b+"px",d.style.height=c+"px",d.style[a.feat.cssPrefix+"BorderRadius"]="2px",d.style.borderRadius="2px",d.style.display="none",d.className="scrollBar",d.style.background="black",d}var f,h,i=a.feat.cssTransformStart,j=a.feat.cssTransformEnd,k=function(b,d){var e;return!g&&a.touchLayer&&a.isObject(a.touchLayer)?c():a.touchLayer&&a.isObject(a.touchLayer)||(a.touchLayer={}),e="string"==typeof b||b instanceof String?document.getElementById(b):b,e?af.os.desktop?new l(e,d):d.useJsScroll?new f(e,d):new h(e,d):(alert("Could not find element for scroller "+b),void 0)
},l=function(b,c){this.el=b,this.afEl=a(this.el);for(var d in c)this[d]=c[d]};return l.prototype={refresh:!1,refreshContent:"Pull to Refresh",refreshHangTimeout:2e3,refreshHeight:60,refreshElement:null,refreshCancelCB:null,refreshRunning:!1,scrollTop:0,scrollLeft:0,preventHideRefresh:!0,verticalScroll:!0,horizontalScroll:!1,refreshTriggered:!1,moved:!1,eventsActive:!1,rememberEventsActive:!1,scrollingLocked:!1,autoEnable:!0,blockFormsFix:!1,loggedPcentY:0,loggedPcentX:0,infinite:!1,infiniteEndCheck:!1,infiniteTriggered:!1,scrollSkip:!1,scrollTopInterval:null,scrollLeftInterval:null,bubbles:!0,lockBounce:!1,_scrollTo:function(a,b){if(b=parseInt(b,10),0===b||isNaN(b))return this.el.scrollTop=Math.abs(a.y),this.el.scrollLeft=Math.abs(a.x),void 0;
var c=10,d=(this.el.scrollTop-a.y)/Math.ceil(b/c),e=(this.el.scrollLeft-a.x)/Math.ceil(b/c),f=this,g=Math.ceil(this.el.scrollTop-a.y)/d,h=Math.ceil(this.el.scrollLeft-a.x)/d,i=0,j=0;f.scrollTopInterval=window.setInterval(function(){f.el.scrollTop-=d,j++,j>=g&&(f.el.scrollTop=a.y,clearInterval(f.scrollTopInterval))},c),f.scrollLeftInterval=window.setInterval(function(){f.el.scrollLeft-=e,i++,i>=h&&(f.el.scrollLeft=a.x,clearInterval(f.scrollLeftInterval))},c)},enable:function(){},disable:function(){},hideScrollbars:function(){},addPullToRefresh:function(){},_scrollToTop:function(a){this._scrollTo({x:0,y:0},a)
},_scrollToBottom:function(a){this._scrollTo({x:0,y:this.el.scrollHeight-this.el.offsetHeight},a)},scrollToBottom:function(a){return this._scrollToBottom(a)},scrollToTop:function(a){return this._scrollToTop(a)},init:function(b,c){this.el=b,this.afEl=a(this.el),this.defaultProperties();for(var d in c)this[d]=c[d];var f=this,g=function(){f.eventsActive&&f.adjustScroll()};this.afEl.bind("destroy",function(){f.disable(!0);var b=f.el.afScrollerId;e[b]&&delete e[b],a.unbind(a.touchLayer,"orientationchange-reshape",g)}),a.bind(a.touchLayer,"orientationchange-reshape",g)},needsFormsFix:function(b){return this.useJsScroll&&this.isEnabled()&&"none"!=this.el.style.display&&a(b).closest(this.afEl).size()>0
},handleEvent:function(a){if(!this.scrollingLocked)switch(a.type){case"touchstart":clearInterval(this.scrollTopInterval),this.preventHideRefresh=!this.refreshRunning,this.moved=!1,this.onTouchStart(a),this.bubbles||a.stopPropagation();break;case"touchmove":this.onTouchMove(a),this.bubbles||a.stopPropagation();break;case"touchend":this.onTouchEnd(a),this.bubbles||a.stopPropagation();break;case"scroll":this.onScroll(a)}},coreAddPullToRefresh:function(b){b&&(this.refreshElement=b);var c;if(null===this.refreshElement){var d=document.getElementById(this.container.id+"_pulldown");c=null!==d?af(d):af("<div id='"+this.container.id+"_pulldown' class='afscroll_refresh' style='border-radius:.6em;border: 1px solid #2A2A2A;background-image: -webkit-gradient(linear,left top,left bottom,color-stop(0,#666666),color-stop(1,#222222));background:#222222;margin:0px;height:60px;position:relative;text-align:center;line-height:60px;color:white;width:100%;'>"+this.refreshContent+"</div>")
}else c=af(this.refreshElement);var e=c.get(0);this.refreshContainer=af('<div style="overflow:hidden;width:100%;height:0;margin:0;padding:0;padding-left:5px;padding-right:5px;display:none;"></div>'),a(this.el).prepend(this.refreshContainer.append(e,"top")),this.refreshContainer=this.refreshContainer[0]},fireRefreshRelease:function(b){if(this.refresh&&b){var c=a.trigger(this,"refresh-release",[b])!==!1;if(this.preventHideRefresh=!1,this.refreshRunning=!0,c){var d=this;this.refreshHangTimeout>0&&(this.refreshCancelCB=setTimeout(function(){d.hideRefresh()},this.refreshHangTimeout))}}},setRefreshContent:function(a){af(this.container).find(".afscroll_refresh").html(a)
},lock:function(){this.scrollingLocked||(this.scrollingLocked=!0,this.rememberEventsActive=this.eventsActive,this.eventsActive&&this.disable())},unlock:function(){this.scrollingLocked&&(this.scrollingLocked=!1,this.rememberEventsActive&&this.enable())},scrollToItem:function(b,c){a.is$(b)||(b=a(b));var d,e,f,g;"bottom"==c?(e=b.offset(),d=e.top-this.afEl.offset().bottom+e.height,d+=4):(g=b.offset().top,d=g-document.body.scrollTop,f=this.afEl.offset().top,document.body.scrollTop<f&&(d-=f),d-=4),this.scrollBy({y:d,x:0},0)},setPaddings:function(b,c){var d=a(this.el),e=numOnly(d.css("paddingTop"));d.css("paddingTop",b+"px").css("paddingBottom",c+"px"),this.scrollBy({y:b-e,x:0})
},divide:function(a,b){return 0!==b?a/b:0},isEnabled:function(){return this.eventsActive},addInfinite:function(){this.infinite=!0},clearInfinite:function(){this.infiniteTriggered=!1,this.scrollSkip=!0}},f=function(c,d){this.init(c,d),this.container=this.el.parentNode,this.container.afScrollerId=c.afScrollerId,this.afEl=a(this.container),"hidden"!=this.container.style.overflow&&(this.container.style.overflow="hidden"),this.addPullToRefresh(null,!0),this.autoEnable&&this.enable(!0);var e;this.verticalScroll&&this.verticalScroll===!0&&this.scrollBars===!0&&(e=b(5,20),e.style.top="0px",this.vScrollCSS&&(e.className=this.vScrollCSS),e.style.display="none",this.container.appendChild(e),this.vscrollBar=e,e=null),this.horizontalScroll&&this.horizontalScroll===!0&&this.scrollBars===!0&&(e=b(20,5),e.style.bottom="0px",this.hScrollCSS&&(e.className=this.hScrollCSS),e.style.display="none",this.container.appendChild(e),this.hscrollBar=e,e=null),this.horizontalScroll&&(this.el.style["float"]="left"),this.el.hasScroller=!0
},h=function(b,c){c.nativeParent&&(b=b.parentNode),this.init(b,c);var d=a(b);if(c.noParent!==!0){var e=d.parent();d.css("height",e.height()).css("width",e.width()),d.insertBefore(d.parent()),e.remove()}this.container=this.el,d.css("-webkit-overflow-scrolling","touch"),c.autoEnable&&this.enable()},h.prototype=new l,f.prototype=new l,h.prototype.defaultProperties=function(){this.refreshContainer=null,this.dY=this.cY=0,this.dX=this.cX=0,this.cancelPropagation=!1,this.loggedPcentY=0,this.loggedPcentX=0;var a=this;this.adjustScrollOverflowProxy_=function(){a.afEl.css("overflow","auto"),a.afEl.parent().css("overflow","hidden")
}},h.prototype.enable=function(a){this.eventsActive||(this.eventsActive=!0,this.el.style.overflow="auto",this.el.parentNode.style.overflow="hidden",a||this.adjustScroll(),this.el.addEventListener("touchstart",this,!1),this.el.addEventListener("scroll",this,!1))},h.prototype.disable=function(a){this.eventsActive&&(this.logPos(this.el.scrollLeft,this.el.scrollTop),a||(this.el.style.overflow="hidden"),this.el.removeEventListener("touchstart",this,!1),this.el.removeEventListener("touchmove",this,!1),this.el.removeEventListener("touchend",this,!1),this.el.removeEventListener("scroll",this,!1),this.eventsActive=!1)
},h.prototype.addPullToRefresh=function(a,b){this.el.removeEventListener("touchstart",this,!1),this.el.addEventListener("touchstart",this,!1),b||(this.refresh=!0),this.refresh&&this.refresh===!0&&(this.coreAddPullToRefresh(a),this.refreshContainer.style.position="absolute",this.refreshContainer.style.top="-60px",this.refreshContainer.style.height="60px",this.refreshContainer.style.display="block")},h.prototype.onTouchStart=function(a){0===this.el.scrollTop&&(this.el.scrollTop=1),this.el.scrollTop===this.el.scrollHeight-this.el.clientHeight&&(this.el.scrollTop-=1),this.horizontalScroll&&(0===this.el.scrollLeft&&(this.el.scrollLeft=1),this.el.scrollLeft===this.el.scrollWidth-this.el.clientWidth&&(this.el.scrollLeft-=1)),this.refreshCancelCB&&clearTimeout(this.refreshCancelCB),this.el.addEventListener("touchmove",this,!1),this.dY=a.touches[0].pageY,(this.refresh||this.infinite)&&this.refresh&&this.dY<0&&this.showRefresh()
},h.prototype.onTouchMove=function(b){var c=b.touches[0].pageY-this.dY,d=b.touches[0].pageX-this.dX;this.hasVertScroll&&this.el.clientHeight==this.el.scrollHeight&&b.preventDefault(),this.hasHorScroll&&this.el.clientWidth==this.el.scrollWidth&&b.preventDefault(),this.moved||(a.trigger(this,"scrollstart",[this.el]),a.trigger(a.touchLayer,"scrollstart",[this.el]),this.el.addEventListener("touchend",this,!1),this.moved=!0),c-this.cY,d-this.cX,this.refresh&&this.el.scrollTop<0?this.showRefresh():this.refreshTriggered&&this.refresh&&this.el.scrollTop>this.refreshHeight&&(this.refreshTriggered=!1,this.refreshCancelCB&&clearTimeout(this.refreshCancelCB),this.hideRefresh(!1),a.trigger(this,"refresh-cancel")),this.cY=c,this.cX=d
},h.prototype.showRefresh=function(){this.refreshTriggered||(this.refreshTriggered=!0,a.trigger(this,"refresh-trigger"))},h.prototype.onTouchEnd=function(){var b=this.el.scrollTop<=-this.refreshHeight;this.fireRefreshRelease(b,!0),b&&this.refresh&&(this.refreshContainer.style.position="relative",this.refreshContainer.style.top="0px"),this.dY=this.cY=0,this.el.removeEventListener("touchmove",this,!1),this.el.removeEventListener("touchend",this,!1),this.infiniteEndCheck=!0,this.infinite&&!this.infiniteTriggered&&Math.abs(this.el.scrollTop)>=this.el.scrollHeight-this.el.clientHeight&&(this.infiniteTriggered=!0,a.trigger(this,"infinite-scroll"),this.infiniteEndCheck=!0),this.touchEndFired=!0;
var c=200,d=this,e={top:this.el.scrollTop,left:this.el.scrollLeft},f=0;d.nativePolling=setInterval(function(){return f++,f>=c?(clearInterval(d.nativePolling),void 0):((d.el.scrollTop!=e.top||d.el.scrollLeft!=e.left)&&(clearInterval(d.nativePolling),a.trigger(a.touchLayer,"scrollend",[d.el]),a.trigger(d,"scrollend",[d.el])),void 0)},20)},h.prototype.hideRefresh=function(b){if(!this.preventHideRefresh){var c=this,e=function(b){b||(c.el.style[a.feat.cssPrefix+"Transform"]="none",c.el.style[a.feat.cssPrefix+"TransitionProperty"]="none",c.el.scrollTop=0,c.logPos(c.el.scrollLeft,0)),c.refreshContainer.style.top="-60px",c.refreshContainer.style.position="absolute",c.dY=c.cY=0,a.trigger(c,"refresh-finish")
};b!==!1&&c.afEl.css3Animate?c.afEl.css3Animate({y:c.el.scrollTop-c.refreshHeight+"px",x:"0%",time:d+"ms",complete:e}):e(),this.refreshTriggered=!1}},h.prototype.hideScrollbars=function(){},h.prototype.scrollTo=function(a,b){return this.logPos(a.x,a.y),a.x*=-1,a.y*=-1,this._scrollTo(a,b)},h.prototype.scrollBy=function(a,b){return a.x+=this.el.scrollLeft,a.y+=this.el.scrollTop,this.logPos(this.el.scrollLeft,this.el.scrollTop),this._scrollTo(a,b)},h.prototype.scrollToBottom=function(a){this._scrollToBottom(a),this.logPos(this.el.scrollLeft,this.el.scrollTop)},h.prototype.onScroll=function(){if(this.infinite&&this.touchEndFired)return this.touchEndFired=!1,void 0;
if(this.scrollSkip)return this.scrollSkip=!1,void 0;this.infinite&&!this.infiniteTriggered&&Math.abs(this.el.scrollTop)>=this.el.scrollHeight-this.el.clientHeight&&(this.infiniteTriggered=!0,a.trigger(this,"infinite-scroll"),this.infiniteEndCheck=!0);var b=this;this.infinite&&this.infiniteEndCheck&&this.infiniteTriggered&&(this.infiniteEndCheck=!1,a.trigger(b,"infinite-scroll-end"))},h.prototype.logPos=function(a,b){this.loggedPcentX=this.divide(a,this.el.scrollWidth),this.loggedPcentY=this.divide(b,this.el.scrollHeight),this.scrollLeft=a,this.scrollTop=b,isNaN(this.loggedPcentX)&&(this.loggedPcentX=0),isNaN(this.loggedPcentY)&&(this.loggedPcentY=0)
},h.prototype.adjustScroll=function(){this.adjustScrollOverflowProxy_(),this.el.scrollLeft=this.loggedPcentX*this.el.scrollWidth,this.el.scrollTop=this.loggedPcentY*this.el.scrollHeight,this.logPos(this.el.scrollLeft,this.el.scrollTop)},f.prototype.defaultProperties=function(){this.boolScrollLock=!1,this.currentScrollingObject=null,this.elementInfo=null,this.verticalScroll=!0,this.horizontalScroll=!1,this.scrollBars=!0,this.vscrollBar=null,this.hscrollBar=null,this.hScrollCSS="scrollBar",this.vScrollCSS="scrollBar",this.firstEventInfo=null,this.moved=!1,this.preventPullToRefresh=!0,this.isScrolling=!1,this.androidFormsMode=!1,this.refreshSafeKeep=!1,this.lastScrollbar="",this.finishScrollingObject=null,this.container=null,this.scrollingFinishCB=null,this.loggedPcentY=0,this.loggedPcentX=0
},f.prototype.enable=function(a){this.eventsActive||(this.eventsActive=!0,a?this.scrollerMoveCSS({x:0,y:0},0):this.adjustScroll(),this.container.addEventListener("touchstart",this,!1),this.container.addEventListener("touchmove",this,!1),this.container.addEventListener("touchend",this,!1))},f.prototype.adjustScroll=function(){var a=this.getViewportSize();this.scrollerMoveCSS({x:Math.round(this.loggedPcentX*(this.el.clientWidth-a.w)),y:Math.round(this.loggedPcentY*(this.el.clientHeight-a.h))},0)},f.prototype.disable=function(){if(this.eventsActive){var a=this.getCSSMatrix(this.el);this.logPos(numOnly(a.e)-numOnly(this.container.scrollLeft),numOnly(a.f)-numOnly(this.container.scrollTop)),this.container.removeEventListener("touchstart",this,!1),this.container.removeEventListener("touchmove",this,!1),this.container.removeEventListener("touchend",this,!1),this.eventsActive=!1
}},f.prototype.addPullToRefresh=function(a,b){b||(this.refresh=!0),this.refresh&&this.refresh===!0&&(this.coreAddPullToRefresh(a),this.el.style.overflow="visible")},f.prototype.hideScrollbars=function(){this.hscrollBar&&(this.hscrollBar.style.display="none",this.hscrollBar.style[a.feat.cssPrefix+"TransitionDuration"]="0ms"),this.vscrollBar&&(this.vscrollBar.style.display="none",this.vscrollBar.style[a.feat.cssPrefix+"TransitionDuration"]="0ms")},f.prototype.getViewportSize=function(){var a=window.getComputedStyle(this.container);return isNaN(numOnly(a.paddingTop))&&alert(typeof a.paddingTop+"::"+a.paddingTop+":"),{h:this.container.clientHeight>window.innerHeight?window.innerHeight:this.container.clientHeight-numOnly(a.paddingTop)-numOnly(a.paddingBottom),w:this.container.clientWidth>window.innerWidth?window.innerWidth:this.container.clientWidth-numOnly(a.paddingLeft)-numOnly(a.paddingRight)}
},f.prototype.onTouchStart=function(b){if(this.moved=!1,this.currentScrollingObject=null,this.container&&(this.refreshCancelCB&&(clearTimeout(this.refreshCancelCB),this.refreshCancelCB=null),this.scrollingFinishCB&&(clearTimeout(this.scrollingFinishCB),this.scrollingFinishCB=null),1==b.touches.length&&!this.boolScrollLock)){if(b.touches[0].target&&void 0!==b.touches[0].target.type){var c=b.touches[0].target.tagName.toLowerCase();if(b.touches[0].target.type.toLowerCase(),"select"==c)return}var d={top:0,left:0,speedY:0,speedX:0,absSpeedY:0,absSpeedX:0,deltaY:0,deltaX:0,absDeltaY:0,absDeltaX:0,y:0,x:0,duration:0};
this.elementInfo={};var e=this.getViewportSize();this.elementInfo.bottomMargin=e.h,this.elementInfo.maxTop=this.el.clientHeight-this.elementInfo.bottomMargin,this.elementInfo.maxTop<0&&(this.elementInfo.maxTop=0),this.elementInfo.divHeight=this.el.clientHeight,this.elementInfo.rightMargin=e.w,this.elementInfo.maxLeft=this.el.clientWidth-this.elementInfo.rightMargin,this.elementInfo.maxLeft<0&&(this.elementInfo.maxLeft=0),this.elementInfo.divWidth=this.el.clientWidth,this.elementInfo.hasVertScroll=this.verticalScroll||this.elementInfo.maxTop>0,this.elementInfo.hasHorScroll=this.elementInfo.maxLeft>0,this.elementInfo.requiresVScrollBar=this.vscrollBar&&this.elementInfo.hasVertScroll,this.elementInfo.requiresHScrollBar=this.hscrollBar&&this.elementInfo.hasHorScroll,this.saveEventInfo(b),this.saveFirstEventInfo(b);
var f=this.getCSSMatrix(this.el);d.top=numOnly(f.f)-numOnly(this.container.scrollTop),d.left=numOnly(f.e)-numOnly(this.container.scrollLeft),this.container.scrollTop=this.container.scrollLeft=0,this.currentScrollingObject=this.el,this.refresh&&0===d.top?(this.refreshContainer.style.display="block",this.refreshHeight=this.refreshContainer.firstChild.clientHeight,this.refreshContainer.firstChild.style.top=-this.refreshHeight+"px",this.refreshContainer.style.overflow="visible",this.preventPullToRefresh=!1):d.top<0&&(this.preventPullToRefresh=!0,this.refresh&&(this.refreshContainer.style.overflow="hidden")),d.x=d.left,d.y=d.top,this.setVScrollBar(d,0,0)&&(this.vscrollBar.style.right=this.container.clientWidth>window.innerWidth?"0px":"0px",this.vscrollBar.style[a.feat.cssPrefix+"Transition"]=""),this.setHScrollBar(d,0,0)&&(this.container.clientHeight>window.innerHeight?this.hscrollBar.style.top=window.innerHeight-numOnly(this.hscrollBar.style.height)+"px":this.hscrollBar.style.bottom=numOnly(this.hscrollBar.style.height),this.hscrollBar.style[a.feat.cssPrefix+"Transition"]=""),this.lastScrollInfo=d,this.hasMoved=!1,this.scrollerMoveCSS(this.lastScrollInfo,0)
}},f.prototype.getCSSMatrix=function(b){if(this.androidFormsMode){var c=parseInt(b.style.marginTop,10),d=parseInt(b.style.marginLeft,10);return isNaN(c)&&(c=0),isNaN(d)&&(d=0),{f:c,e:d}}var e=a.getCssMatrix(b);return e},f.prototype.saveEventInfo=function(a){this.lastEventInfo={pageX:a.touches[0].pageX,pageY:a.touches[0].pageY,time:a.timeStamp}},f.prototype.saveFirstEventInfo=function(a){this.firstEventInfo={pageX:a.touches[0].pageX,pageY:a.touches[0].pageY,time:a.timeStamp}},f.prototype.setVScrollBar=function(a,b,c){if(!this.elementInfo.requiresVScrollBar)return!1;var d=parseFloat(this.elementInfo.bottomMargin/this.elementInfo.divHeight)*this.elementInfo.bottomMargin+"px";
numOnly(d)>this.elementInfo.bottomMargin&&(d=this.elementInfo.bottomMargin+"px"),d!=this.vscrollBar.style.height&&(this.vscrollBar.style.height=d);var e=this.elementInfo.bottomMargin-numOnly(this.vscrollBar.style.height)-(this.elementInfo.maxTop+a.y)/this.elementInfo.maxTop*(this.elementInfo.bottomMargin-numOnly(this.vscrollBar.style.height));return e>this.elementInfo.bottomMargin&&(e=this.elementInfo.bottomMargin),0>e&&(e=0),this.scrollbarMoveCSS(this.vscrollBar,{x:0,y:e},b,c),!0},f.prototype.setHScrollBar=function(a,b,c){if(!this.elementInfo.requiresHScrollBar)return!1;var d=parseFloat(this.elementInfo.rightMargin/this.elementInfo.divWidth)*this.elementInfo.rightMargin+"px";
d!=this.hscrollBar.style.width&&(this.hscrollBar.style.width=d);var e=this.elementInfo.rightMargin-numOnly(this.hscrollBar.style.width)-(this.elementInfo.maxLeft+a.x)/this.elementInfo.maxLeft*(this.elementInfo.rightMargin-numOnly(this.hscrollBar.style.width));return e>this.elementInfo.rightMargin&&(e=this.elementInfo.rightMargin),0>e&&(e=0),this.scrollbarMoveCSS(this.hscrollBar,{x:e,y:0},b,c),!0},f.prototype.onTouchMove=function(b){if(null!==this.currentScrollingObject){var c=this.calculateMovement(b);this.calculateTarget(c),this.lastScrollInfo=c,this.moved||(a.trigger(this,"scrollstart"),a.trigger(a.touchLayer,"scrollstart",[this.el]),this.elementInfo.requiresVScrollBar&&(this.vscrollBar.style.display="block"),this.elementInfo.requiresHScrollBar&&(this.hscrollBar.style.display="block")),this.moved=!0,this.refresh&&0===c.top?(this.refreshContainer.style.display="block",this.refreshHeight=this.refreshContainer.firstChild.clientHeight,this.refreshContainer.firstChild.style.top=-this.refreshHeight+"px",this.refreshContainer.style.overflow="visible",this.preventPullToRefresh=!1):c.top<0&&(this.preventPullToRefresh=!0,this.refresh&&(this.refreshContainer.style.overflow="hidden")),this.saveEventInfo(b),this.isScrolling===!1&&(this.isScrolling=!0,this.onScrollStart&&this.onScrollStart());
var d=this.getCSSMatrix(this.el);this.lastScrollInfo.top=numOnly(d.f),this.lastScrollInfo.left=numOnly(d.e),this.recalculateDeltaY(this.lastScrollInfo),this.recalculateDeltaX(this.lastScrollInfo),this.checkYboundary(this.lastScrollInfo),this.elementInfo.hasHorScroll&&this.checkXboundary(this.lastScrollInfo);var e=this.lastScrollInfo.y>0&&this.lastScrollInfo.deltaY>0,f=this.lastScrollInfo.y<-this.elementInfo.maxTop&&this.lastScrollInfo.deltaY<0;if(e||f){var g=e?this.lastScrollInfo.y:-this.lastScrollInfo.y-this.elementInfo.maxTop,h=(this.container.clientHeight-g)/this.container.clientHeight;.5>h&&(h=.5);
var i=0;e&&this.lastScrollInfo.top>0||f&&this.lastScrollInfo.top<-this.elementInfo.maxTop?i=this.lastScrollInfo.top:f&&(i=-this.elementInfo.maxTop);var j=this.lastScrollInfo.deltaY*h,k=Math.abs(this.lastScrollInfo.deltaY*h);1>k&&(j=e?1:-1),this.lastScrollInfo.y=i+j}if(this.elementInfo.hasHorScroll&&(e=this.lastScrollInfo.x>0&&this.lastScrollInfo.deltaX>0,f=this.lastScrollInfo.x<-this.elementInfo.maxLeft&&this.lastScrollInfo.deltaX<0,e||f)){var g=e?this.lastScrollInfo.x:-this.lastScrollInfo.x-this.elementInfo.maxLeft,h=(this.container.clientWidth-g)/this.container.clientWidth;.5>h&&(h=.5);var i=0;
e&&this.lastScrollInfo.left>0||f&&this.lastScrollInfo.left<-this.elementInfo.maxLeft?i=this.lastScrollInfo.left:f&&(i=-this.elementInfo.maxLeft);var l=this.lastScrollInfo.deltaX*h,m=Math.abs(this.lastScrollInfo.deltaX*h);1>m&&(l=e?1:-1),this.lastScrollInfo.x=i+l}this.lockBounce&&(this.lastScrollInfo.x>0?this.lastScrollInfo.x=0:-1*this.lastScrollInfo.x>this.elementInfo.maxLeft&&(this.lastScrollInfo.x=-1*this.elementInfo.maxLeft),this.lastScrollInfo.y>0?this.lastScrollInfo.y=0:-1*this.lastScrollInfo.y>this.elementInfo.maxTop&&(this.lastScrollInfo.y=-1*this.elementInfo.maxTop)),this.scrollerMoveCSS(this.lastScrollInfo,0),this.setVScrollBar(this.lastScrollInfo,0,0),this.setHScrollBar(this.lastScrollInfo,0,0),this.refresh&&!this.preventPullToRefresh&&(!this.refreshTriggered&&this.lastScrollInfo.top>this.refreshHeight?(this.refreshTriggered=!0,a.trigger(this,"refresh-trigger")):this.refreshTriggered&&this.lastScrollInfo.top<this.refreshHeight&&(this.refreshTriggered=!1,a.trigger(this,"refresh-cancel"))),this.infinite&&!this.infiniteTriggered&&Math.abs(this.lastScrollInfo.top)>=this.el.clientHeight-this.container.clientHeight&&(this.infiniteTriggered=!0,a.trigger(this,"infinite-scroll"))
}},f.prototype.calculateMovement=function(a,b){var c={top:0,left:0,speedY:0,speedX:0,absSpeedY:0,absSpeedX:0,deltaY:0,deltaX:0,absDeltaY:0,absDeltaX:0,y:0,x:0,duration:0},d=b?this.firstEventInfo:this.lastEventInfo,e=b?a.pageX:a.touches[0].pageX,f=b?a.pageY:a.touches[0].pageY,g=b?a.time:a.timeStamp;return c.deltaY=this.elementInfo.hasVertScroll?f-d.pageY:0,c.deltaX=this.elementInfo.hasHorScroll?e-d.pageX:0,c.time=g,c.duration=g-d.time,c},f.prototype.calculateTarget=function(a){a.y=this.lastScrollInfo.y+a.deltaY,a.x=this.lastScrollInfo.x+a.deltaX},f.prototype.checkYboundary=function(a){var b=this.container.clientHeight/2,c=this.elementInfo.maxTop+b;
if(a.y>b)a.y=b;else{if(!(-a.y>c))return;a.y=-c}this.recalculateDeltaY(a)},f.prototype.checkXboundary=function(a){var b=this.container.clientWidth/2,c=this.elementInfo.maxLeft+b;if(a.x>b)a.x=b;else{if(!(-a.x>c))return;a.x=-c}this.recalculateDeltaX(a)},f.prototype.recalculateDeltaY=function(a){var b=Math.abs(a.deltaY);a.deltaY=a.y-a.top,newAbsDeltaY=Math.abs(a.deltaY),a.duration=a.duration*newAbsDeltaY/b},f.prototype.recalculateDeltaX=function(a){var b=Math.abs(a.deltaX);a.deltaX=a.x-a.left,newAbsDeltaX=Math.abs(a.deltaX),a.duration=a.duration*newAbsDeltaX/b},f.prototype.hideRefresh=function(){var b=this;
this.preventHideRefresh||(this.scrollerMoveCSS({x:0,y:0,complete:function(){a.trigger(b,"refresh-finish")}},d),this.refreshTriggered=!1)},f.prototype.setMomentum=function(a){var b=.0012;a.speedY=this.divide(a.deltaY,a.duration),a.speedX=this.divide(a.deltaX,a.duration),a.absSpeedY=Math.abs(a.speedY),a.absSpeedX=Math.abs(a.speedX),a.absDeltaY=Math.abs(a.deltaY),a.absDeltaX=Math.abs(a.deltaX),a.absDeltaY>0?(a.deltaY=(a.deltaY<0?-1:1)*a.absSpeedY*a.absSpeedY/(2*b),a.absDeltaY=Math.abs(a.deltaY),a.duration=a.absSpeedY/b,a.speedY=a.deltaY/a.duration,a.absSpeedY=Math.abs(a.speedY),(a.absSpeedY<100*b||a.absDeltaY<5)&&(a.deltaY=a.absDeltaY=a.duration=a.speedY=a.absSpeedY=0)):a.absDeltaX?(a.deltaX=(a.deltaX<0?-1:1)*a.absSpeedX*a.absSpeedX/(2*b),a.absDeltaX=Math.abs(a.deltaX),a.duration=a.absSpeedX/b,a.speedX=a.deltaX/a.duration,a.absSpeedX=Math.abs(a.speedX),(a.absSpeedX<100*b||a.absDeltaX<5)&&(a.deltaX=a.absDeltaX=a.duration=a.speedX=a.absSpeedX=0)):a.duration=0
},f.prototype.onTouchEnd=function(){if(null!==this.currentScrollingObject&&this.moved){this.finishScrollingObject=this.currentScrollingObject,this.currentScrollingObject=null;var b=this.calculateMovement(this.lastEventInfo,!0);this.androidFormsMode||this.setMomentum(b),this.calculateTarget(b);var c=this.getCSSMatrix(this.el);b.top=numOnly(c.f),b.left=numOnly(c.e),this.checkYboundary(b),this.elementInfo.hasHorScroll&&this.checkXboundary(b);var e=!this.preventPullToRefresh&&(b.top>this.refreshHeight||b.y>this.refreshHeight);this.fireRefreshRelease(e,b.top>0),this.refresh&&e?(b.y=this.refreshHeight,b.duration=d):b.y>=0?(b.y=0,b.top>=0&&(b.duration=d)):(-b.y>this.elementInfo.maxTop||0===this.elementInfo.maxTop)&&(b.y=-this.elementInfo.maxTop,-b.top>this.elementInfo.maxTop&&(b.duration=d)),this.elementInfo.hasHorScroll&&(b.x>=0?(b.x=0,b.left>=0&&(b.duration=d)):(-b.x>this.elementInfo.maxLeft||0===this.elementInfo.maxLeft)&&(b.x=-this.elementInfo.maxLeft,-b.left>this.elementInfo.maxLeft&&(b.duration=d))),this.androidFormsMode&&(b.duration=0),this.scrollerMoveCSS(b,b.duration,"cubic-bezier(0.33,0.66,0.66,1)"),this.setVScrollBar(b,b.duration,"cubic-bezier(0.33,0.66,0.66,1)"),this.setHScrollBar(b,b.duration,"cubic-bezier(0.33,0.66,0.66,1)"),this.setFinishCalback(b.duration),this.infinite&&!this.infiniteTriggered&&Math.abs(b.y)>=this.el.clientHeight-this.container.clientHeight&&(this.infiniteTriggered=!0,a.trigger(this,"infinite-scroll"))
}},f.prototype.setFinishCalback=function(b){var c=this;this.scrollingFinishCB=setTimeout(function(){c.hideScrollbars(),a.trigger(a.touchLayer,"scrollend",[c.el]),a.trigger(c,"scrollend",[c.el]),c.isScrolling=!1,c.elementInfo=null,c.infinite&&a.trigger(c,"infinite-scroll-end")},b)},f.prototype.startFormsMode=function(){if(!this.blockFormsFix){var b=this.getCSSMatrix(this.el);this.refreshSafeKeep=this.refresh,this.refresh=!1,this.androidFormsMode=!0,this.el.style[a.feat.cssPrefix+"Transform"]="none",this.el.style[a.feat.cssPrefix+"Transition"]="none",this.el.style[a.feat.cssPrefix+"Perspective"]="none",this.scrollerMoveCSS({x:numOnly(b.e),y:numOnly(b.f)},0),this.container.style[a.feat.cssPrefix+"Perspective"]="none",this.container.style[a.feat.cssPrefix+"BackfaceVisibility"]="visible",this.vscrollBar&&(this.vscrollBar.style[a.feat.cssPrefix+"Transform"]="none",this.vscrollBar.style[a.feat.cssPrefix+"Transition"]="none",this.vscrollBar.style[a.feat.cssPrefix+"Perspective"]="none",this.vscrollBar.style[a.feat.cssPrefix+"BackfaceVisibility"]="visible"),this.hscrollBar&&(this.hscrollBar.style[a.feat.cssPrefix+"Transform"]="none",this.hscrollBar.style[a.feat.cssPrefix+"Transition"]="none",this.hscrollBar.style[a.feat.cssPrefix+"Perspective"]="none",this.hscrollBar.style[a.feat.cssPrefix+"BackfaceVisibility"]="visible")
}},f.prototype.stopFormsMode=function(){if(!this.blockFormsFix){var b=this.getCSSMatrix(this.el);this.refresh=this.refreshSafeKeep,this.androidFormsMode=!1,this.el.style[a.feat.cssPrefix+"Perspective"]=1e3,this.el.style.marginTop=0,this.el.style.marginLeft=0,this.el.style[a.feat.cssPrefix+"Transition"]="0ms linear",this.scrollerMoveCSS({x:numOnly(b.e),y:numOnly(b.f)},0),this.container.style[a.feat.cssPrefix+"Perspective"]=1e3,this.container.style[a.feat.cssPrefix+"BackfaceVisibility"]="hidden",this.vscrollBar&&(this.vscrollBar.style[a.feat.cssPrefix+"Perspective"]=1e3,this.vscrollBar.style[a.feat.cssPrefix+"BackfaceVisibility"]="hidden"),this.hscrollBar&&(this.hscrollBar.style[a.feat.cssPrefix+"Perspective"]=1e3,this.hscrollBar.style[a.feat.cssPrefix+"BackfaceVisibility"]="hidden")
}},f.prototype.scrollerMoveCSS=function(b,c,d){c||(c=0),d||(d="linear"),c=numOnly(c),this.el&&this.el.style&&(this.eventsActive&&(this.androidFormsMode?(this.el.style.marginTop=Math.round(b.y)+"px",this.el.style.marginLeft=Math.round(b.x)+"px"):(this.el.style[a.feat.cssPrefix+"Transform"]="translate"+i+b.x+"px,"+b.y+"px"+j,this.el.style[a.feat.cssPrefix+"TransitionDuration"]=c+"ms",this.el.style[a.feat.cssPrefix+"TransitionTimingFunction"]=d)),this.logPos(b.x,b.y))},f.prototype.logPos=function(a,b){var c;c=this.elementInfo?{h:this.elementInfo.bottomMargin,w:this.elementInfo.rightMargin}:this.getViewportSize(),this.loggedPcentX=this.divide(a,this.el.clientWidth-c.w),this.loggedPcentY=this.divide(b,this.el.clientHeight-c.h),this.scrollTop=b,this.scrollLeft=a
},f.prototype.scrollbarMoveCSS=function(b,c,d,e){d||(d=0),e||(e="linear"),b&&b.style&&(this.androidFormsMode?(b.style.marginTop=Math.round(c.y)+"px",b.style.marginLeft=Math.round(c.x)+"px"):(b.style[a.feat.cssPrefix+"Transform"]="translate"+i+c.x+"px,"+c.y+"px"+j,b.style[a.feat.cssPrefix+"TransitionDuration"]=d+"ms",b.style[a.feat.cssPrefix+"TransitionTimingFunction"]=e))},f.prototype.scrollTo=function(a,b){b||(b=0),this.scrollerMoveCSS(a,b)},f.prototype.scrollBy=function(a,b){var c=this.getCSSMatrix(this.el),d=numOnly(c.f),e=numOnly(c.e);this.scrollTo({y:d-a.y,x:e-a.x},b)},f.prototype.scrollToBottom=function(a){this.scrollTo({y:-1*(this.el.clientHeight-this.container.clientHeight),x:0},a)
},f.prototype.scrollToTop=function(a){this.scrollTo({x:0,y:0},a)},k}()}(af),function(a){a.fn.popup=function(a){return new c(this[0],a)};var b=[],c=function(){var c=function(c,d){if(this.container="string"==typeof c||c instanceof String?document.getElementById(c):c,!this.container)return alert("Error finding container for popup "+c),void 0;try{("string"==typeof d||"number"==typeof d)&&(d={message:d,cancelOnly:"true",cancelText:"OK"}),this.id=id=d.id=d.id||a.uuid(),this.title=d.suppressTitle?"":d.title||"Alert",this.message=d.message||"",this.cancelText=d.cancelText||"Cancel",this.cancelCallback=d.cancelCallback||function(){},this.cancelClass=d.cancelClass||"button",this.doneText=d.doneText||"Done",this.doneCallback=d.doneCallback||function(){},this.doneClass=d.doneClass||"button",this.cancelOnly=d.cancelOnly||!1,this.onShow=d.onShow||function(){},this.autoCloseDone=void 0!==d.autoCloseDone?d.autoCloseDone:!0,b.push(this),1==b.length&&this.show()
}catch(e){console.log("error adding popup "+e)}};return c.prototype={id:null,title:null,message:null,cancelText:null,cancelCallback:null,cancelClass:null,doneText:null,doneCallback:null,doneClass:null,cancelOnly:!1,onShow:null,autoCloseDone:!0,supressTitle:!1,show:function(){var b=this,c='<div id="'+this.id+'" class="afPopup hidden">'+"<header>"+this.title+"</header>"+"<div>"+this.message+"</div>"+'<footer style="clear:both;">'+'<a href="javascript:;" class="'+this.cancelClass+'" id="cancel">'+this.cancelText+"</a>"+'<a href="javascript:;" class="'+this.doneClass+'" id="action">'+this.doneText+"</a>"+" </footer>"+"</div></div>";
a(this.container).append(a(c));var d=a.query("#"+this.id);d.bind("close",function(){b.hide()}),this.cancelOnly&&(d.find("A#action").hide(),d.find("A#cancel").addClass("center")),d.find("A").each(function(){var c=a(this);c.bind("click",function(a){"cancel"==c.attr("id")?(b.cancelCallback.call(b.cancelCallback,b),b.hide()):(b.doneCallback.call(b.doneCallback,b),b.autoCloseDone&&b.hide()),a.preventDefault()})}),b.positionPopup(),a.blockUI(.5),d.bind("orientationchange",function(){b.positionPopup()}),d.find("header").show(),d.find("footer").show(),setTimeout(function(){d.removeClass("hidden"),b.onShow(b)
},50)},hide:function(){var b=this;a.query("#"+b.id).addClass("hidden"),a.unblockUI(),a.os.ie||a.os.android?b.remove():setTimeout(function(){b.remove()},250)},remove:function(){var c=this,d=a.query("#"+c.id);d.unbind("close"),d.find("BUTTON#action").unbind("click"),d.find("BUTTON#cancel").unbind("click"),d.unbind("orientationchange").remove(),b.splice(0,1),b.length>0&&b[0].show()},positionPopup:function(){var b=a.query("#"+this.id);b.css("top",window.innerHeight/2.5+window.pageYOffset-b[0].clientHeight/2+"px"),b.css("left",window.innerWidth/2-b[0].clientWidth/2+"px")}},c}(),d=!1;a.blockUI=function(b){d||(b=b?" style='opacity:"+b+";'":"",a.query("BODY").prepend(a("<div id='mask'"+b+"></div>")),a.query("BODY DIV#mask").bind("touchstart",function(a){a.preventDefault()
}),a.query("BODY DIV#mask").bind("touchmove",function(a){a.preventDefault()}),d=!0)},a.unblockUI=function(){d=!1,a.query("BODY DIV#mask").unbind("touchstart"),a.query("BODY DIV#mask").unbind("touchmove"),a("BODY DIV#mask").remove()}}(af),function(a){a.fn.actionsheet=function(a){for(var c,d=0;d<this.length;d++)c=new b(this[d],a);return 1==this.length?c:this};var b=function(){var b=function(c,d){if(this.el="string"==typeof c||c instanceof String?document.getElementById(c):c,!this.el)return alert("Could not find element for actionsheet "+c),void 0;if(!(this instanceof b))return new b(c,d);if("object"==typeof d)for(var e in d)this[e]=d[e];
var f,g=this,h='<div id="af_actionsheet"><div style="width:100%">',i="</div></div>";if("string"==typeof d)f=a(h+d+"<a href='javascript:;' class='cancel'>Cancel</a>"+i);else if("object"==typeof d){f=a(h+i);var j=a(f.children().get(0));d.push({text:"Cancel",cssClasses:"cancel"});for(var k=0;k<d.length;k++){var l=a('<a href="javascript:;" >'+(d[k].text||"TEXT NOT ENTERED")+"</a>");l[0].onclick=d[k].handler||function(){},d[k].cssClasses&&d[k].cssClasses.length>0&&l.addClass(d[k].cssClasses),j.append(l)}}a(c).find("#af_actionsheet").remove(),a(c).find("#af_action_mask").remove(),actionsheetEl=a(c).append(f),f.vendorCss("Transition","all 0ms"),f.cssTranslate("0,0"),f.css("top",window.innerHeight+"px"),this.el.style.overflow="hidden",f.on("click","a",function(){return g.hideSheet(),!1
}),this.activeSheet=f,a(c).append('<div id="af_action_mask" style="position:absolute;top:0px;left:0px;right:0px;bottom:0px;z-index:9998;background:rgba(0,0,0,.4)"/>'),setTimeout(function(){f.vendorCss("Transition","all 300ms"),f.cssTranslate("0,"+-f.height()+"px")},10)};return b.prototype={activeSheet:null,hideSheet:function(){var b=this;this.activeSheet.off("click","a",function(){b.hideSheet()}),a(this.el).find("#af_action_mask").remove(),this.activeSheet.vendorCss("Transition","all 0ms");var c=this.activeSheet,d=this.el;setTimeout(function(){c.vendorCss("Transition","all 300ms"),c.cssTranslate("0,0px"),setTimeout(function(){c.remove(),c=null,d.style.overflow="none"
},500)},10)}},b}()}(af),function(a){a.passwordBox=function(){return new b};var b=function(){this.oldPasswords={}};b.prototype={showPasswordPlainText:!1,getOldPasswords:function(b){var c=b&&document.getElementById(b)?document.getElementById(b):document;if(!c)return alert("Could not find container element for passwordBox "+b),void 0;for(var d=c.getElementsByTagName("input"),e=0;e<d.length;e++)"password"==d[e].type&&a.os.webkit&&(d[e].type="text",a(d[e]).vendorCss("TextSecurity","disc"))},changePasswordVisiblity:function(b,c){b=parseInt(b,10);var d=document.getElementById(c);1==b?a(d).vendorCss("TextSecurity","none"):a(d).vendorCss("TextSecurity","disc"),a.os.webkit||(d.type=1==b?"text":"password"),d=null
}}}(af),function(a){function b(b,c,d){return d===!0&&(this.getAttribute("multiple")||a.selectBox.updateMaskValue(this.parentNode.id,this.text,this.value),this.parentNode.value=this.value),d}function c(b,c,d){return this.options[d]&&(this.getAttribute("multiple")||a.selectBox.updateMaskValue(this.linker,this.options[d].value,this.options[d].text),this.value=this.options[d].value),d}function d(b){var c=b.target;a(c.linker).remove(),delete c.linker,b.stopPropagation()}a.selectBox={scroller:null,currLinker:null,getOldSelects:function(e){if(a.os.android&&!a.os.androidICS){if(!a.fn.scroller)return alert("This library requires af.scroller"),void 0;
var f=e&&document.getElementById(e)?document.getElementById(e):document;if(!f)return alert("Could not find container element for af.selectBox "+e),void 0;for(var g=f.getElementsByTagName("select"),h=this,i=0;i<g.length;i++){var j=g[i];j.style.display="none";var k=a.create("div",{className:"afFakeSelect"});k.get(0).linker=g[i],j.linker=k.get(0),k.insertAfter(g[i]),j.watch("selectedIndex",c);for(var l=0;l<j.options.length;l++)j.options[l].watch("selected",b),j.options[l].selected&&k.html(j.options[l].text);a(j).one("destroy",d)}h.createHtml()}},updateDropdown:function(a){if(a){for(var b=0;b<a.options.length;b++)a.options[b].selected&&(a.linker.innerHTML=a.options[b].text);
a=null}},initDropDown:function(c){if(!c.disabled&&c&&c.options&&0!==c.options.length){var d=0,e=a("#afSelectBoxfix");e.html("<ul></ul>");for(var f=e.find("ul"),g=0;g<c.options.length;g++){c.options[g].watch("selected",b);var h=c.options[g].selected?"selected":"";h&&(d=g+1);var i=a.create("li",{html:c.options[g].text,className:h});i.data("ind",g),f.append(i)}a("#afModalMask").show();try{if(d>0&&"multiple"!=c.getAttribute("multiple")){var j=0,k=numOnly(f.find("li").computedStyle("height")),l=numOnly(a("#afSelectBoxContainer").computedStyle("height"));d*k>=l&&(j=(d-1)*-k),this.scroller.scrollTo({x:0,y:j})
}}catch(m){console.log("error init dropdown"+m)}var n="block"==a("#afSelectClose").css("display")?numOnly(a("#afSelectClose").height()):0;a("#afSelectWrapper").height(numOnly(a("#afSelectBoxContainer").height())-n+"px")}},updateMaskValue:function(b,c,d){a(b).html(d)},setDropDownValue:function(b,c){if(b){var d=a(b);if(c=parseInt(c,10),b.getAttribute("multiple")){var e=a("#afSelectBoxfix li:nth-child("+(c+1)+")");e.hasClass("selected")?e.removeClass("selected"):e.addClass("selected")}else b.selectedIndex=c,d.find("option").prop("selected",!1),d.find("option:nth-child("+(c+1)+")").prop("selected",!0),this.scroller.scrollTo({x:0,y:0}),this.hideDropDown();
a(b).trigger("change"),b=null}},hideDropDown:function(){a("#afModalMask").hide(),a("#afSelectBoxfix").html("")},createHtml:function(){var b=this;document.getElementById("afSelectBoxfix")||a(document).ready(function(){a(document).on("click",".afFakeSelect",function(){this.linker.disabled||(b.currLinker=this,"multiple"==this.linker.getAttribute("multiple")?a("#afSelectClose").show():a("#afSelectClose").hide(),b.initDropDown(this.linker))});var c=a.create("div",{id:"afSelectBoxContainer"}),d=a.create("div",{id:"afSelectBoxfix"}),e=a.create("div",{id:"afSelectWrapper"});e.css("position","relative"),e.append(d);
var f=a.create("div",{id:"afSelectClose",html:"<a id='afSelectDone'>Done</a> <a id='afSelectCancel'>Cancel</a>"}),g=a.create("div",{id:"afModalMask"}),h=a("#afui");c.prepend(f).append(e),g.append(c),h.length>0?h.append(g):document.body.appendChild(g.get(0)),b.scroller=a.query("#afSelectBoxfix").scroller({scroller:!1,verticalScroll:!0,vScrollCSS:"jqselectscrollBarV"}),a("#afModalMask").on("click",function(c){var d=a(c.target);0===d.closest("#afSelectBoxContainer").length&&b.hideDropDown()}),a("#afSelectBoxfix").on("click","li",function(c){var d=a(c.target);b.setDropDownValue(b.currLinker.linker,d.data("ind"))
}),a("#afSelectBoxContainer").on("click","a",function(c){if("afSelectCancel"==c.target.id)return b.hideDropDown();var d=a(b.currLinker.linker);return d.find("option").prop("selected",!1),a("#afSelectBoxfix li").each(function(){var c=a(this);if(c.hasClass("selected")){var e=parseInt(c.data("ind"),10);d.find("option:nth-child("+(e+1)+")").prop("selected",!0),b.currLinker.innerHTML=c.html()}}),b.hideDropDown(),c.stopPropagation(),c.preventDefault(),!1})})}},HTMLElement.prototype.watch||(HTMLElement.prototype.watch=function(a,b){var c=this[a],d=c,e=function(){return d},f=function(e){return c=d,d=b.call(this,a,c,e)
};delete this[a]&&(HTMLElement.defineProperty?HTMLElement.defineProperty(this,a,{get:e,set:f,enumerable:!1,configurable:!0}):HTMLElement.prototype.__defineGetter__&&HTMLElement.prototype.__defineSetter__&&(HTMLElement.prototype.__defineGetter__.call(this,a,e),HTMLElement.prototype.__defineSetter__.call(this,a,f)))}),HTMLElement.prototype.unwatch||(HTMLElement.prototype.unwatch=function(a){var b=this[a];delete this[a],this[a]=b})}(af),function(a){function b(a){return"tagName"in a?a:a.parentNode}function c(a,b,c,d){var e=Math.abs(a-b),f=Math.abs(c-d);return e>=f?a-b>0?"Left":"Right":c-d>0?"Up":"Down"
}function d(){g.last&&Date.now()-g.last>=h&&(g.el.trigger("longTap"),g={})}var e,f,g={},h=750;a(document).ready(function(){var i;a(document.body).bind("touchstart",function(c){if(c.originalEvent&&(c=c.originalEvent),c.touches&&0!==c.touches.length){var j=Date.now(),k=j-(g.last||j);c.touches&&0!==c.touches.length&&(g.el=a(b(c.touches[0].target)),e&&clearTimeout(e),g.x1=c.touches[0].pageX,g.y1=c.touches[0].pageY,g.x2=g.y2=0,k>0&&250>=k&&(g.isDoubleTap=!0),g.last=j,f=setTimeout(d,h),a.ui.useAutoPressed&&!g.el.data("ignore-pressed")&&g.el.addClass("pressed"),i&&a.ui.useAutoPressed&&!i.data("ignore-pressed")&&i.removeClass("pressed"),i=g.el)
}}).bind("touchmove",function(a){a.originalEvent&&(a=a.originalEvent),g.x2=a.touches[0].pageX,g.y2=a.touches[0].pageY,clearTimeout(f)}).bind("touchend",function(b){b.originalEvent&&(b=b.originalEvent),g.el&&(a.ui.useAutoPressed&&!g.el.data("ignore-pressed")&&g.el.removeClass("pressed"),g.isDoubleTap?(g.el.trigger("doubleTap"),g={}):g.x2>0||g.y2>0?((Math.abs(g.x1-g.x2)>30||Math.abs(g.y1-g.y2)>30)&&g.el.trigger("swipe")&&g.el.trigger("swipe"+c(g.x1,g.x2,g.y1,g.y2)),g.x1=g.x2=g.y1=g.y2=g.last=0):"last"in g&&(g.el.trigger("tap"),e=setTimeout(function(){e=null,g.el&&g.el.trigger("singleTap"),g={}},250)))
}).bind("touchcancel",function(){g.el&&a.ui.useAutoPressed&&!g.el.data("ignore-pressed")&&g.el.removeClass("pressed"),g={},clearTimeout(f)})}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(b){a.fn[b]=function(a){return this.bind(b,a)}})}(jq),function(a){a.touchLayer=function(b){return a.touchLayer=new l(b),a.touchLayer};var b=["input","select","textarea"],c=["button","radio","checkbox","range","date"],d=a.os.ios,e=a.os.blackberry,f=a.os.blackberry||a.os.android&&!a.os.chrome;a.os.blackberry||a.os.android&&!a.os.chrome,a.os.ios;
var g=a.os.ios,h=.97,i=2,j=!1,k=!1,l=function(b){this.clearTouchVars(),b.addEventListener("touchstart",this,!1),b.addEventListener("touchmove",this,!1),b.addEventListener("touchend",this,!1),b.addEventListener("click",this,!1),b.addEventListener("focusin",this,!1),document.addEventListener("scroll",this,!1),window.addEventListener("resize",this,!1),window.addEventListener("orientationchange",this,!1),this.layer=b,this.scrollEndedProxy_=a.proxy(this.scrollEnded,this),this.exitEditProxy_=a.proxy(this.exitExit,this,[]),this.launchFixUIProxy_=a.proxy(this.launchFixUI,this);var c=this;this.scrollTimeoutExpireProxy_=function(){c.scrollTimeout_=null,c.scrollTimeoutEl_.addEventListener("scroll",c.scrollEndedProxy_,!1)
},this.retestAndFixUIProxy_=function(){af.os.android&&(c.layer.style.height="100%"),a.asap(c.testAndFixUI,c,arguments)},document.addEventListener("click",function(a){return k?(a.preventDefault(),a.stopPropagation(),!1):(void 0!==a.clientX&&null!=c.lastTouchStartX&&2>Math.abs(c.lastTouchStartX-a.clientX)&&2>Math.abs(c.lastTouchStartY-a.clientY)&&(a.preventDefault(),a.stopPropagation()),void 0)},!0),a.bind(this,"scrollstart",function(b){c.isScrolling=!0,c.scrollingEl_=b,a.feat.nativeTouchScroll||(c.scrollerIsScrolling=!0),c.fireEvent("UIEvents","scrollstart",b,!1,!1)}),a.bind(this,"scrollend",function(b){c.isScrolling=!1,a.feat.nativeTouchScroll||(c.scrollerIsScrolling=!1),c.fireEvent("UIEvents","scrollend",b,!1,!1)
}),this.launchFixUI(5)};l.prototype={dX:0,dY:0,cX:0,cY:0,touchStartX:null,touchStartY:null,layer:null,scrollingEl_:null,scrollTimeoutEl_:null,scrollTimeout_:null,reshapeTimeout_:null,scrollEndedProxy_:null,exitEditProxy_:null,launchFixUIProxy_:null,reHideAddressBarTimeout_:null,retestAndFixUIProxy_:null,panElementId:"header",blockClicks:!1,allowDocumentScroll_:!1,ignoreNextResize_:!1,blockPossibleClick_:!1,isScrolling:!1,isScrollingVertical_:!1,wasPanning_:!1,isPanning_:!1,isFocused_:!1,justBlurred_:!1,requiresNativeTap:!1,holdingReshapeType_:null,trackingClick:!1,scrollerIsScrolling:!1,handleEvent:function(a){switch(a.type){case"touchstart":this.onTouchStart(a);
break;case"touchmove":this.onTouchMove(a);break;case"touchend":this.onTouchEnd(a);break;case"click":this.onClick(a);break;case"blur":this.onBlur(a);break;case"scroll":this.onScroll(a);break;case"orientationchange":this.onOrientationChange(a);break;case"resize":this.onResize(a);break;case"focusin":this.onFocusIn(a)}},launchFixUI:function(a){return a||(a=i),null===this.reHideAddressBarTimeout_?this.testAndFixUI(0,a):void 0},resetFixUI:function(){this.reHideAddressBarTimeout_&&clearTimeout(this.reHideAddressBarTimeout_),this.reHideAddressBarTimeout_=null},testAndFixUI:function(a,b){var c=this.getReferenceHeight(),d=this.getCurrentHeight();
return c==d||c>d*h&&d>c*h?(af.os.android&&this.resetFixUI(),!1):(this.hideAddressBar(a,b),!0)},hideAddressBar:function(a,b){if(!af.ui||!af.ui.isIntel){if(a>=b)return this.resetFixUI(),void 0;if(af.os.desktop||af.os.chrome)this.layer.style.height="100%";else if(af.os.android){window.scrollTo(1,1),this.layer.style.height=this.isFocused_||window.innerHeight>window.outerHeight?window.innerHeight+"px":window.outerHeight/window.devicePixelRatio+"px",that=this;var c=a+1;this.reHideAddressBarTimeout_=setTimeout(this.retestAndFixUIProxy_,250*c,[c,b])}else this.isFocused_||(document.documentElement.style.height="5000px",window.scrollTo(0,0),document.documentElement.style.height=window.innerHeight+"px",this.layer.style.height=window.innerHeight+"px")
}},getReferenceHeight:function(){return af.os.android?Math.ceil(window.outerHeight/window.devicePixelRatio):window.innerHeight},getCurrentHeight:function(){return af.os.android?window.innerHeight:numOnly(document.documentElement.style.height)},onOrientationChange:function(){!this.holdingReshapeType_&&this.reshapeTimeout_?this.fireReshapeEvent("orientationchange"):this.previewReshapeEvent("orientationchange")},onResize:function(){return this.ignoreNextResize_?(this.ignoreNextResize_=!1,void 0):(this.launchFixUI()&&this.reshapeAction(),void 0)},onClick:function(e){var f=e.target&&void 0!==e.target.tagName?e.target.tagName.toLowerCase():"";
if(-1===b.indexOf(f)||this.isFocused_&&e.target===this.focusedElement)a.os.blackberry10&&this.isFocused_&&this.focusedElement.blur();else{var g=e.target&&void 0!==e.target.type?e.target.type.toLowerCase():"",h=-1!==c.indexOf(g);if(h)this.isFocused_=!1;else{if(this.isFocused_&&this.focusedElement.removeEventListener("blur",this,!1),this.focusedElement=e.target,this.focusedElement.addEventListener("blur",this,!1),!this.isFocused_&&!this.justBlurred_)if(a.trigger(this,"enter-edit",[e.target]),a.os.ios){var i=this;setTimeout(function(){i.fireReshapeEvent("enter-edit")},300)}else this.previewReshapeEvent("enter-edit");
this.isFocused_=!0}this.justBlurred_=!1,this.allowDocumentScroll_=!0,d&&e.target.focus()}},previewReshapeEvent:function(a){that=this,this.reshapeTimeout_=setTimeout(function(){that.fireReshapeEvent(a),that.reshapeTimeout_=null,that.holdingReshapeType_=null},750),this.holdingReshapeType_=a},fireReshapeEvent:function(b){a.trigger(this,"reshape"),a.trigger(this,b?b+"-reshape":"unknown-reshape")},reshapeAction:function(){this.reshapeTimeout_?(clearTimeout(this.reshapeTimeout_),this.fireReshapeEvent(this.holdingReshapeType_),this.holdingReshapeType_=null,this.reshapeTimeout_=null):this.previewReshapeEvent()
},onFocusIn:function(a){this.isFocused_||this.onClick(a)},onBlur:function(b){af.os.android&&b.target==window||(this.isFocused_=!1,this.focusedElement&&this.focusedElement.removeEventListener("blur",this,!1),this.focusedElement=null,this.justBlurred_=!0,a.asap(this.exitEditProxy_,this,[b.target]))},exitExit:function(b){if(this.justBlurred_=!1,!this.isFocused_)if(a.trigger(this,"exit-edit",[b]),this.allowDocumentScroll_=!1,a.os.ios){var c=this;setTimeout(function(){c.fireReshapeEvent("exit-edit")},300)}else this.previewReshapeEvent("exit-edit")},onScroll:function(a){this.allowDocumentScroll_||this.isPanning_||a.target!=document||(this.allowDocumentScroll_=!0,this.wasPanning_?(this.wasPanning_=!1,setTimeout(this.launchFixUIProxy_,2e3,[i])):this.launchFixUI())
},onTouchStart:function(c){if(this.dX=c.touches[0].pageX,this.dY=c.touches[0].pageY,this.lastTimestamp=c.timeStamp,this.lastTouchStartX=this.lastTouchStartY=null,a.os.ios){if(j===c.touches[0].identifier)return k=!0,c.preventDefault(),!1;j=c.touches[0].identifier,k=!1}if(this.scrollerIsScrolling)return this.moved=!0,this.scrollerIsScrolling=!1,c.preventDefault(),!1;this.trackingClick=!0,(g||a.feat.nativeTouchScroll)&&this.checkDOMTree(c.target,this.layer),this.isScrolling&&(null!==this.scrollTimeout_?(clearTimeout(this.scrollTimeout_),this.scrollTimeout_=null,this.scrollTimeoutEl_!=this.scrollingEl_?this.scrollEnded(!1):this.blockPossibleClick_=!0):this.scrollTimeoutEl_&&(this.scrollEnded(!0),this.blockPossibleClick_=!0));
var d=af.os.android&&c&&c.target&&c.target.getAttribute&&"ignore"==c.target.getAttribute("data-touchlayer");if(d||this.isFocused_&&!a.os.blackberry10)this.requiresNativeTap=!0,this.allowDocumentScroll_=!0;else if(f&&c.target&&void 0!==c.target.tagName){var e=c.target.tagName.toLowerCase();-1!==b.indexOf(e)&&(this.requiresNativeTap=!0)}else c.target&&void 0!==c.target.tagName&&"input"==c.target.tagName.toLowerCase()&&"range"==c.target.type&&(this.requiresNativeTap=!0);this.isPanning_||this.requiresNativeTap?this.isScrollingVertical_&&this.demandVerticalScroll():(this.isScrolling&&!a.feat.nativeTouchScroll||!this.isScrolling)&&c.preventDefault()
},demandVerticalScroll:function(){var a=this.scrollingEl_.scrollTop<=0;if(a)this.scrollingEl_.scrollTop=1;else{var b=this.scrollingEl_.scrollTop+this.scrollingEl_.clientHeight,c=b>=this.scrollingEl_.scrollHeight;c&&(this.scrollingEl_.scrollTop=this.scrollingEl_.scrollHeight-this.scrollingEl_.clientHeight-1)}},ignoreScrolling:function(a){return void 0===a.scrollWidth||void 0===a.clientWidth?!0:void 0===a.scrollHeight||void 0===a.clientHeight?!0:!1},allowsVerticalScroll:function(a,b){var c=b.overflowY;return"scroll"==c?!0:"auto"==c&&a.scrollHeight>a.clientHeight?!0:!1},allowsHorizontalScroll:function(a,b){var c=b.overflowX;
return"scroll"==c?!0:"auto"==c&&a.scrollWidth>a.clientWidth?!0:!1},checkDOMTree:function(b,c){if(g&&this.panElementId==b.id)return this.isPanning_=!0,void 0;if(a.feat.nativeTouchScroll){if(this.ignoreScrolling(b))return;var d=window.getComputedStyle(b);if(this.allowsVerticalScroll(b,d))return this.isScrollingVertical_=!0,this.scrollingEl_=b,this.isScrolling=!0,void 0;this.allowsHorizontalScroll(b,d)&&(this.isScrollingVertical_=!1,this.scrollingEl_=null,this.isScrolling=!0)}var e=b==c;!e&&b.parentNode&&this.checkDOMTree(b.parentNode,c)},scrollEnded:function(a){null!==this.scrollTimeoutEl_&&(a&&this.scrollTimeoutEl_.removeEventListener("scroll",this.scrollEndedProxy_,!1),this.fireEvent("UIEvents","scrollend",this.scrollTimeoutEl_,!1,!1),this.scrollTimeoutEl_=null)
},onTouchMove:function(b){var c=this.moved;return this.moved=!0,e&&(this.cY=b.touches[0].pageY-this.dY,this.cX=b.touches[0].pageX-this.dX),this.isPanning_?void 0:(this.isScrolling&&(c||this.fireEvent("UIEvents","scrollstart",this.scrollingEl_,!1,!1),this.speedY=(this.lastY-b.touches[0].pageY)/(b.timeStamp-this.lastTimestamp),this.lastY=b.touches[0].pageY,this.lastX=b.touches[0].pageX,this.lastTimestamp=b.timeStamp),a.os.blackberry10?void 0:(this.isScrolling&&a.feat.nativeTouchScroll||b.preventDefault(),void 0))},onTouchEnd:function(b){var c=this.moved;if(e&&(c=c&&!(Math.abs(this.cX)<10&&Math.abs(this.cY)<10)),af.os.ios&&this.requiresNativeTap||(this.allowDocumentScroll_=!1),this.isPanning_&&c)this.wasPanning_=!0;
else if(c||this.requiresNativeTap)c&&(this.isScrolling&&(this.scrollTimeoutEl_=this.scrollingEl_,Math.abs(this.speedY)<.01?this.scrollEnded(!1):this.scrollTimeout_=setTimeout(this.scrollTimeoutExpireProxy_,30)),this.requiresNativeTap&&(this.isFocused_||a.trigger(this,"cancel-enter-edit",[b.target])));else{if(this.scrollerIsScrolling=!1,!this.trackingClick)return;if(b.preventDefault(),!this.blockClicks&&!this.blockPossibleClick_){var d=b.target;3==d.nodeType&&(d=d.parentNode),this.fireEvent("Event","click",d,!0,b.mouseToTouch,b.changedTouches[0]),this.lastTouchStartX=this.dX,this.lastTouchStartY=this.dY
}}a.os.blackberry10&&(this.lastTouchStartX=this.dX,this.lastTouchStartY=this.dY),this.clearTouchVars()},clearTouchVars:function(){this.speedY=this.lastY=this.cY=this.cX=this.dX=this.dY=0,this.moved=!1,this.isPanning_=!1,this.isScrolling=!1,this.isScrollingVertical_=!1,this.requiresNativeTap=!1,this.blockPossibleClick_=!1,this.trackingClick=!1},fireEvent:function(b,c,d,e,f,g){var h=document.createEvent(b);h.initEvent(c,e,!0),h.target=d,g&&a.each(g,function(a,b){h[a]=b}),f&&(h.mouseToTouch=!0),d.dispatchEvent(h)}}}(af),function(a){"use strict";function b(){a.ui.isWin8=!0,a.os.ie&&a.ui.ready(function(){a.ui.slideSideMenu&&(a.ui.slideSideMenu=!1),a.query("#afui #navbar footer").append("<a id='metroMenu' onclick='$.ui.toggleSideMenu()'>•••</a>");
var b=a.query("#afui #navbar").find("a");if(b.length>0){b.data("ignore-pressed","true").data("resetHistory","true");var c=parseFloat(100/b.length);b.css("width",c+"%")}var d=a.ui.updateNavbarElements;a.ui.updateNavbarElements=function(){d.apply(a.ui,arguments),1!=a.query("#afui #navbar #metroMenu").length&&a.query("#afui #navbar footer").append("<a id='metroMenu' onclick='$.ui.toggleSideMenu()'>•••</a>")},a.ui.toggleSideMenu,a.ui.isSideMenuOn=function(){var b=parseInt(a.getCssMatrix(a("#navbar")).f)<0?!0:!1;return this.isSideMenuEnabled()&&b},a.ui.toggleSideMenu=function(b,c){if(this.isSideMenuEnabled()&&!this.togglingSideMenu){this.togglingSideMenu=!0;
var d=this,e=a.query("#menu"),f=a.query("#navbar"),g=this.isSideMenuOn();2===b||!g&&(void 0!==b&&b!==!1||void 0===b)?(e.show(),d.css3animate(f,{y:"-150px",time:a.ui.transitionTime,complete:function(){d.togglingSideMenu=!1,c&&c(!0)}}),d.css3animate(e,{y:"0px",time:a.ui.transitionTime})):(void 0===b||void 0!==b&&b===!1)&&(d.css3animate(f,{y:"0",time:a.ui.transitionTime,complete:function(){d.togglingSideMenu=!1,c&&c(!0),e.hide()}}),d.css3animate(e,{y:"150px",time:a.ui.transitionTime}))}}})}if(!a)throw"This plugin requires jqUi";a.ui?b():a(document).ready(function(){b()})}(af);